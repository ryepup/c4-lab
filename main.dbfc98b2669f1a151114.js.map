{"version":3,"sources":["webpack:///main.dbfc98b2669f1a151114.js","webpack:///./src/core/index.ts","webpack:///./src/store/actions.ts","webpack:///./src/header/index.js","webpack:///./src/core/parse/InvalidDirectionError.ts","webpack:///./src/core/parse/OptsNotFoundError.ts","webpack:///./src/core/parse/NameNotFoundError.ts","webpack:///./src/core/codegen.ts","webpack:///./src/header/about.component.js","webpack:///./src/viewer/index.js","webpack:///./src/index.js","webpack:///./src/editor/index.js","webpack:///./src/editor/editor.component.js","webpack:///./src/editor/editor.html","webpack:///./src/header/nav.component.js","webpack:///./src/header/nav.html","webpack:///./src/header/GitHub-Mark-32px.png","webpack:///./src/core/parse/index.ts","webpack:///./src/core/parse/Parser.ts","webpack:///./src/core/interfaces.ts","webpack:///./src/core/parse/TitleNotAStringError.ts","webpack:///./src/core/parse/TitleNotAtTopLevelError.ts","webpack:///./src/core/DataStore.ts","webpack:///./src/core/exporter/index.ts","webpack:///./src/core/dot-writer.ts","webpack:///./src/core/DOT.ts","webpack:///./src/core/parse/ParseError.ts","webpack:///./src/header/importer.js","webpack:///./src/header/about.html","webpack:///./src/shell/index.js","webpack:///./src/shell/app.component.js","webpack:///./src/shell/app.html","webpack:///./src/build-info/index.js","webpack:///./src/build-info/template.html","webpack:///./src/routes.js","webpack:///./src/preview/index.js","webpack:///./src/preview/preview.component.js","webpack:///./src/preview/preview.html","webpack:///./src/viewer/viewer.component.js","webpack:///./src/viewer/viewer.html","webpack:///./src/help/index.js","webpack:///./src/help/help.html","webpack:///./src/help/help.md","webpack:///./src/store/store.module.ts","webpack:///./src/store/reducers/index.ts","webpack:///./src/store/reducers/c4lab.sexp","webpack:///./src/store/sagas.ts","webpack:///./src/store/sagas/export.ts","webpack:///./src/store/sagas/github.ts","webpack:///./src/core/exporter/gist.ts","webpack:///./src/store/sagas/preview.ts"],"names":["webpackJsonp","126","module","exports","__webpack_require__","Object","defineProperty","value","_index","enumerable","get","parse","ParseError","_codegen","uriEncode","uriDecode","toSvg","_DataStore","DataStore","_exporter","Exporter","formats","_dotWriter","toDot","28","exported","previewEdit","preview","gistExport","githubLogout","githubLoginComplete","githubLoggedIn","zoomChanged","angularInitialized","svgChanged","dotChanged","sourceChanged","sourceParseError","sourceParsed","undefined","_typescriptFsa","_typescriptFsa2","obj","__esModule","default","actionCreator","async","280","_interopRequireWildcard","newObj","key","prototype","hasOwnProperty","call","_angular","_angular2","_nav","nav","_about","about","component","name","options","281","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","configurable","setPrototypeOf","__proto__","_ParseError2","_ParseError3","InvalidDirectionError","_ParseError","dir","this","getPrototypeOf","282","OptsNotFoundError","type","283","NameNotFoundError","284","toDataUrl","img","createElement","canvas","width","height","context","getContext","drawImage","toDataURL","toPngDataUri","_lzString","lz","_viz","_viz2","dot","format","engine","text","compressToEncodedURIComponent","uriData","decompressFromEncodedURIComponent","svg","Promise","resolve","onload","setAttribute","encodeURIComponent","285","_about2","template","bindings","close","286","angular","_viewer","viewer","349","_interopRequireDefault","allowBlobsAndDataHrefs","$compileProvider","aHrefSanitizationWhitelist","_angularticsGoogleAnalytics","_angularticsGoogleAnalytics2","_editor","editor","_header","_header2","_shell","shell","_buildInfo","buildInfo","_routes","_routes2","_preview","_preview2","_viewer2","_help","_help2","_store","_store2","_actions","run","install","config","$state","$ngRedux","$window","dispatch","591","keys","forEach","592","$log","debug","CodeMirror","_codemirror2","EditorController","_createClass","defineProperties","target","props","i","length","descriptor","protoProps","staticProps","_codemirror","_editor2","log","editorOptions","lineNumbers","mode","theme","matchBrackets","autoCloseBrackets","unsubscribe","connect","mapStateToThis","state","source","parseError","syntaxIsValid","controller","598","599","600","process","_nav2","_importer","aboutComponent","githubLoginPopupUrl","env","C4_GITHUB_LOGIN_POPUP_URL","NavController","$uibModal","exportFormats","zoom","zoomNodeId","user","href","data","files","_this","readAllText","then","_onImport","open","_this2","expectedOrigin","URL","origin","addEventListener","event","token","payload","capture","once","601","602","603","604","_InvalidDirectionError","_OptsNotFoundError","_NameNotFoundError","_Parser","Parser","605","_defineProperty","_toArray","arr","Array","isArray","from","isString","x","isList","isAtom","canonicalize","keywordAliases","filter","_ref","test","map","_ref2","to","parseKeywordArgs","kwargs","allowed","arguments","_kwargs","keyword","rest","slice","Error","content","assign","pathToId","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","push","err","_path","path","_sexprPlus","sexp","_md","_interfaces","_InvalidDirectionError2","_NameNotFoundError2","_OptsNotFoundError2","_TitleNotAStringError","_TitleNotAStringError2","_TitleNotAtTopLevelError","_TitleNotAtTopLevelError2","p","Md5","hashStr","graphTitle","idMap","pathMap","edges","items","tokens","buildIR","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","e","postProcessEdge","return","roots","parentId","id","title","parent","buildIRNode","_token$content","head","tail","node","_buildIRNode","isEdge","children","every","canExpand","replace","toLowerCase","trim","edge","item","_tokens","opts","_opts$content","pathToNode","toString","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","n","sourceId","_ref4","_ref5","input","startsWith","src","join","destinationId","direction","sourceParentIds","findParentIds","destinationParentIds","concat","609","610","TitleNotAStringError","JSON","stringify","611","TitleNotAtTopLevelError","614","localStorage","getItem","setItem","615","split","document","safeTitle","png","downloadFile","_dot","dataUri","filename","contentType","a","download","click","616","_toConsumableArray","arr2","DotContext","_lodash","_wordwrap","wordwrap","_DOT","typeShapeMap","actor","container","hrefTo","visibleIds","visibleEdges","soft","graph","findVisibleNodes","sort","isEdgeVisible","_draw","regeneratorRuntime","mark","wrap","_context","prev","delegateYield","digraphHeaders","rootNode","drawChildCluster","drawCluster","drawItems","drawEdge","stop","visibleNodes","uniq","nodeOrId","indexOf","nodeOrText","htmlNewlines","description","wrapped","edgeOrText","toDescription","isIdVisible","isCrossingSystems","visibleSourceIds","findVisibleIds","visibleDestinationIds","ids","_this3","includes","indent","dotId","label","nonClustered","style","_context2","toDotId","toLabel","DOT","b","otherChildren","nextIndent","_this4","_context3","_context4","font","nodesOrIds","_this5","_context5","drawItem","tech","toTechDescription","desc","shape","attrs","some","tooltip","u","attrList","_this6","srcOk","dstOk","getId","idOk","parentIds","result","find","srcId","dstId","dst","ltail","lhead","getEdgeDirection","ctx","load","draw","619","color","Reflect","ownKeys","String","quoteAttr","62","_extendableBuiltin2","apply","cls","ExtendableBuiltin","construct","620","file","reader","FileReader","reject","loadEvt","onerror","readAsText","621","622","_app","623","AppController","_app2","codeExpanded","624","625","_template","_template2","BuildInfoController","version","build","hash","626","627","configureRoutes","$stateProvider","$urlRouterProvider","otherwise","url","$stateParams","onEnter","getState","encodedText","628","previewComponent","629","PreviewComponent","encodedSource","630","631","ViewerComponent","$sce","bind","expandableNodes","zoomableNodes","trustAsHtml","transclude","632","633","_help3","_help4","HelpController","634","635","639","_reduxSaga","_reduxSaga2","_reducers","_reducers2","_sagas","timingMiddleware","store","action","console","time","group","timeEnd","groupEnd","enhancers","reduxDevtool","window","__REDUX_DEVTOOLS_EXTENSION__","sagas","$ngReduxProvider","createStoreWith","rootSaga","715","initialState","_redux","_typescriptFsaReducers","_c4lab","_c4lab2","sourceReducer","isPreview","reducerWithInitialState","case","old","evt","testSafeSourceReducer","parseErrorReducer","error","graphReducer","zoomableNodesReducer","localeCompare","zoomNodeIdReducer","dotReducer","svgReducer","stateReducer","windowReducer","userReducer","isPreviewReducer","rootReducer","combineReducers","717","718","onSourceChanged","_core","_effects","put","t0","message","_marked","current","params","render","select","sent","abrupt","save","wait","_marked2","ms","setTimeout","updateZoom","go","notify","_marked3","latestSource","takeLatest","_marked4","latestGraph","_marked5","latestZoom","_context6","throttle","_marked6","init","storage","_context7","take","location","_marked7","_context8","all","_github2","_export2","_marked8","_export","_github","719","onExport","exporter","started","export","exportSaga","720","onGithubLogin","octokit","authenticate","users","avatarUrl","avatar_url","login","exportToGist","_window$location","pathname","_gist","GistExporter","handleLogin","handleExport","githubSaga","_rest","Octokit","785","872","createReadme","gh","gists","createFiles","public","resp","html_url","README.md","873","onPreviewEdit","onPreview","latestPreview","latestPreviewEdit","previewSaga"],"mappings":"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","file":"main.dbfc98b2669f1a151114.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 126:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _index = __webpack_require__(604);\n\nObject.defineProperty(exports, 'parse', {\n  enumerable: true,\n  get: function get() {\n    return _index.parse;\n  }\n});\nObject.defineProperty(exports, 'ParseError', {\n  enumerable: true,\n  get: function get() {\n    return _index.ParseError;\n  }\n});\n\nvar _codegen = __webpack_require__(284);\n\nObject.defineProperty(exports, 'uriEncode', {\n  enumerable: true,\n  get: function get() {\n    return _codegen.uriEncode;\n  }\n});\nObject.defineProperty(exports, 'uriDecode', {\n  enumerable: true,\n  get: function get() {\n    return _codegen.uriDecode;\n  }\n});\nObject.defineProperty(exports, 'toSvg', {\n  enumerable: true,\n  get: function get() {\n    return _codegen.toSvg;\n  }\n});\n\nvar _DataStore = __webpack_require__(614);\n\nObject.defineProperty(exports, 'DataStore', {\n  enumerable: true,\n  get: function get() {\n    return _DataStore.DataStore;\n  }\n});\n\nvar _exporter = __webpack_require__(615);\n\nObject.defineProperty(exports, 'Exporter', {\n  enumerable: true,\n  get: function get() {\n    return _exporter.Exporter;\n  }\n});\nObject.defineProperty(exports, 'formats', {\n  enumerable: true,\n  get: function get() {\n    return _exporter.formats;\n  }\n});\n\nvar _dotWriter = __webpack_require__(616);\n\nObject.defineProperty(exports, 'toDot', {\n  enumerable: true,\n  get: function get() {\n    return _dotWriter.toDot;\n  }\n});\n\n/***/ }),\n\n/***/ 28:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.exported = exports.previewEdit = exports.preview = exports.gistExport = exports.githubLogout = exports.githubLoginComplete = exports.githubLoggedIn = exports.zoomChanged = exports.angularInitialized = exports.svgChanged = exports.dotChanged = exports.sourceChanged = exports.sourceParseError = exports.sourceParsed = undefined;\n\nvar _typescriptFsa = __webpack_require__(279);\n\nvar _typescriptFsa2 = _interopRequireDefault(_typescriptFsa);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar actionCreator = (0, _typescriptFsa2.default)();\nvar sourceParsed = exports.sourceParsed = actionCreator('C4_SOURCE_PARSED');\nvar sourceParseError = exports.sourceParseError = actionCreator('C4_SOURCE_PARSE_ERROR');\nvar sourceChanged = exports.sourceChanged = actionCreator('C4_SOURCE_CHANGED');\nvar dotChanged = exports.dotChanged = actionCreator('C4_DOT_CHANGED');\nvar svgChanged = exports.svgChanged = actionCreator('C4_SVG_CHANGED');\nvar angularInitialized = exports.angularInitialized = actionCreator('C4_ANGULAR_INITIALIZED');\nvar zoomChanged = exports.zoomChanged = actionCreator('C4_ZOOM_CHANGED');\nvar githubLoggedIn = exports.githubLoggedIn = actionCreator('C4_GITHUB_LOGGED_IN');\nvar githubLoginComplete = exports.githubLoginComplete = actionCreator('C4_GITHUB_LOGIN_COMPLETE');\nvar githubLogout = exports.githubLogout = actionCreator('C4_GITHUB_LOGOUT');\nvar gistExport = exports.gistExport = actionCreator.async('C4_GIST_EXPORT');\nvar preview = exports.preview = actionCreator('C4_PREVIEW');\nvar previewEdit = exports.previewEdit = actionCreator('C4_PREVIEW_EDIT');\nvar exported = exports.exported = actionCreator('C4_EXPORT');\n\n/***/ }),\n\n/***/ 280:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _angular = __webpack_require__(43);\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nvar _nav = __webpack_require__(600);\n\nvar nav = _interopRequireWildcard(_nav);\n\nvar _about = __webpack_require__(285);\n\nvar about = _interopRequireWildcard(_about);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _angular2.default.module('c4-lab.header', ['ui.bootstrap', 'ui.router']).component(nav.name, nav.options).component(about.name, about.options).name;\n\n/***/ }),\n\n/***/ 281:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _ParseError2 = __webpack_require__(62);\n\nvar _ParseError3 = _interopRequireDefault(_ParseError2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar InvalidDirectionError = function (_ParseError) {\n    _inherits(InvalidDirectionError, _ParseError);\n\n    function InvalidDirectionError(dir) {\n        _classCallCheck(this, InvalidDirectionError);\n\n        return _possibleConstructorReturn(this, (InvalidDirectionError.__proto__ || Object.getPrototypeOf(InvalidDirectionError)).call(this, 'Unknown edge direction \"' + dir + '\". valid options are \"push\", \"pull\", or \"both\"'));\n    }\n\n    return InvalidDirectionError;\n}(_ParseError3.default);\n\nexports.default = InvalidDirectionError;\n\n/***/ }),\n\n/***/ 282:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _ParseError2 = __webpack_require__(62);\n\nvar _ParseError3 = _interopRequireDefault(_ParseError2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar OptsNotFoundError = function (_ParseError) {\n    _inherits(OptsNotFoundError, _ParseError);\n\n    function OptsNotFoundError(type) {\n        _classCallCheck(this, OptsNotFoundError);\n\n        return _possibleConstructorReturn(this, (OptsNotFoundError.__proto__ || Object.getPrototypeOf(OptsNotFoundError)).call(this, 'missing options for a ' + type));\n    }\n\n    return OptsNotFoundError;\n}(_ParseError3.default);\n\nexports.default = OptsNotFoundError;\n\n/***/ }),\n\n/***/ 283:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _ParseError2 = __webpack_require__(62);\n\nvar _ParseError3 = _interopRequireDefault(_ParseError2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar NameNotFoundError = function (_ParseError) {\n    _inherits(NameNotFoundError, _ParseError);\n\n    function NameNotFoundError(type) {\n        _classCallCheck(this, NameNotFoundError);\n\n        return _possibleConstructorReturn(this, (NameNotFoundError.__proto__ || Object.getPrototypeOf(NameNotFoundError)).call(this, 'missing a name for a ' + type));\n    }\n\n    return NameNotFoundError;\n}(_ParseError3.default);\n\nexports.default = NameNotFoundError;\n\n/***/ }),\n\n/***/ 284:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.toPngDataUri = exports.uriDecode = exports.uriEncode = exports.toSvg = undefined;\n\nvar _lzString = __webpack_require__(612);\n\nvar lz = _interopRequireWildcard(_lzString);\n\nvar _viz = __webpack_require__(613);\n\nvar _viz2 = _interopRequireDefault(_viz);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n/**\n * convert a graph from DOT text to SVG\n */\nvar toSvg = exports.toSvg = function toSvg(dot) {\n    return (0, _viz2.default)(dot, { format: 'svg', engine: 'dot' });\n};\n/**\n * convert a text representation to an URI-encoded representation\n */\nvar uriEncode = exports.uriEncode = function uriEncode(text) {\n    return lz.compressToEncodedURIComponent(text);\n};\n/**\n * convert an URI-encoded representation to a text representation\n */\nvar uriDecode = exports.uriDecode = function uriDecode(uriData) {\n    return lz.decompressFromEncodedURIComponent(uriData);\n};\n/**\n * convert DOT text to a png-encoded data URI\n */\nvar toPngDataUri = exports.toPngDataUri = function toPngDataUri(dot, createElement) {\n    var svg = toSvg(dot);\n    var img = createElement('img');\n    return new Promise(function (resolve) {\n        img.onload = function () {\n            return resolve(toDataUrl(img, createElement));\n        };\n        img.setAttribute('src', 'data:image/svg+xml,' + encodeURIComponent(svg));\n    });\n};\nfunction toDataUrl(img, createElement) {\n    var canvas = createElement('canvas');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    var context = canvas.getContext('2d');\n    if (context) {\n        context.drawImage(img, 0, 0);\n        var dataUrl = canvas.toDataURL('image/png');\n        return dataUrl;\n    }\n}\n\n/***/ }),\n\n/***/ 285:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = undefined;\n\nvar _about = __webpack_require__(621);\n\nvar _about2 = _interopRequireDefault(_about);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar name = exports.name = \"c4LabAboutModal\";\nvar options = exports.options = {\n    template: _about2.default,\n    bindings: {\n        close: '&'\n    }\n};\n\n/***/ }),\n\n/***/ 286:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _angular = __webpack_require__(43);\n\nvar angular = _interopRequireWildcard(_angular);\n\n__webpack_require__(250);\n\n__webpack_require__(251);\n\nvar _viewer = __webpack_require__(631);\n\nvar viewer = _interopRequireWildcard(_viewer);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = angular.module('c4-lab.viewer', ['ui.bootstrap', 'ui.router']).component(viewer.name, viewer.options).name;\n\n/***/ }),\n\n/***/ 349:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _angular = __webpack_require__(43);\n\nvar angular = _interopRequireWildcard(_angular);\n\n__webpack_require__(351);\n\n__webpack_require__(553);\n\n__webpack_require__(250);\n\n__webpack_require__(251);\n\n__webpack_require__(583);\n\n__webpack_require__(585);\n\n__webpack_require__(587);\n\nvar _angularticsGoogleAnalytics = __webpack_require__(589);\n\nvar _angularticsGoogleAnalytics2 = _interopRequireDefault(_angularticsGoogleAnalytics);\n\nvar _editor = __webpack_require__(591);\n\nvar editor = _interopRequireWildcard(_editor);\n\nvar _header = __webpack_require__(280);\n\nvar _header2 = _interopRequireDefault(_header);\n\nvar _shell = __webpack_require__(622);\n\nvar shell = _interopRequireWildcard(_shell);\n\nvar _buildInfo = __webpack_require__(625);\n\nvar buildInfo = _interopRequireWildcard(_buildInfo);\n\nvar _routes = __webpack_require__(627);\n\nvar _routes2 = _interopRequireDefault(_routes);\n\nvar _preview = __webpack_require__(628);\n\nvar _preview2 = _interopRequireDefault(_preview);\n\nvar _viewer = __webpack_require__(286);\n\nvar _viewer2 = _interopRequireDefault(_viewer);\n\nvar _help = __webpack_require__(633);\n\nvar _help2 = _interopRequireDefault(_help);\n\nvar _store = __webpack_require__(639);\n\nvar _store2 = _interopRequireDefault(_store);\n\nvar _actions = __webpack_require__(28);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nangular.module('c4-lab', ['ui.codemirror', 'ui.bootstrap', 'ui.router', 'ngAnimate', 'ngFileUpload', _angularticsGoogleAnalytics2.default, _header2.default, _preview2.default, _viewer2.default, _help2.default, _store2.default]).component(buildInfo.name, buildInfo.options).component(editor.name, editor.options).component(shell.name, shell.options).run(editor.install).config(allowBlobsAndDataHrefs).config(_routes2.default).run(function ($state, $ngRedux, $window) {\n  $ngRedux.dispatch((0, _actions.angularInitialized)({ $state: $state, $window: $window }));\n});\n\n// @ngInject\nfunction allowBlobsAndDataHrefs($compileProvider) {\n  $compileProvider.aHrefSanitizationWhitelist(/^(https?|ftp|mailto|blob|data):/i);\n}\n\n/***/ }),\n\n/***/ 591:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _editor = __webpack_require__(592);\n\nObject.keys(_editor).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _editor[key];\n    }\n  });\n});\n\n/***/ }),\n\n/***/ 592:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = exports.EditorController = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.install = install;\n\n__webpack_require__(593);\n\n__webpack_require__(594);\n\n__webpack_require__(595);\n\n__webpack_require__(596);\n\n__webpack_require__(597);\n\nvar _codemirror = __webpack_require__(125);\n\nvar _codemirror2 = _interopRequireDefault(_codemirror);\n\nvar _editor = __webpack_require__(598);\n\nvar _editor2 = _interopRequireDefault(_editor);\n\n__webpack_require__(599);\n\nvar _actions = __webpack_require__(28);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar EditorController = exports.EditorController = function () {\n    function EditorController($log, $ngRedux) {\n        'ngInject';\n\n        _classCallCheck(this, EditorController);\n\n        this.log = $log;\n        this.editorOptions = {\n            lineNumbers: true,\n            mode: \"commonlisp\",\n            theme: \"elegant\",\n            matchBrackets: true,\n            autoCloseBrackets: true\n        };\n\n        this.unsubscribe = $ngRedux.connect(this.mapStateToThis, { sourceChanged: _actions.sourceChanged })(this);\n    }\n\n    _createClass(EditorController, [{\n        key: '$onDestroy',\n        value: function $onDestroy() {\n            this.unsubscribe();\n        }\n    }, {\n        key: 'mapStateToThis',\n        value: function mapStateToThis(state) {\n            return {\n                text: state.source,\n                parseError: state.parseError,\n                syntaxIsValid: state.parseError ? false : true\n            };\n        }\n    }, {\n        key: 'parse',\n        value: function parse(text) {\n            this.sourceChanged({ source: text });\n        }\n    }]);\n\n    return EditorController;\n}();\n\nvar name = exports.name = \"c4LabEditor\";\nvar options = exports.options = {\n    template: _editor2.default,\n    controller: EditorController\n\n    // @ngInject\n};function install($window, $log) {\n    $log.debug('installing codemirror');\n    $window.CodeMirror = _codemirror2.default;\n}\n\n/***/ }),\n\n/***/ 598:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div ng-class=\\\"{'bg-success': $ctrl.syntaxIsValid, 'bg-danger': !$ctrl.syntaxIsValid}\\\" style=\\\"padding: 0 1em;\\\">\\n    <ui-codemirror ui-codemirror-opts=\\\"$ctrl.editorOptions\\\" ng-model=\\\"$ctrl.text\\\" ng-model-options=\\\"{ debounce: 250 }\\\"\\n        ng-change=\\\"$ctrl.parse($ctrl.text)\\\">\\n    </ui-codemirror>\\n    <span class=\\\"help-block\\\">{{ $ctrl.parseError }}</span>\\n</div>\";\n\n/***/ }),\n\n/***/ 599:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 600:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(process) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n// TODO: don't need core, just look at redux\n\n\nvar _nav = __webpack_require__(601);\n\nvar _nav2 = _interopRequireDefault(_nav);\n\n__webpack_require__(603);\n\nvar _index = __webpack_require__(126);\n\nvar _importer = __webpack_require__(620);\n\nvar _about = __webpack_require__(285);\n\nvar aboutComponent = _interopRequireWildcard(_about);\n\nvar _actions = __webpack_require__(28);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* global process */\nvar githubLoginPopupUrl = process.env.C4_GITHUB_LOGIN_POPUP_URL || 'https://c4-lab.azurewebsites.net/api/GithubLogin?code=CZiBo89DKe5LcWUHYtYqQYkTZUU1OmLsIXOFxmBfLaL3HmVXVTCbkg==';\n\nvar NavController = function () {\n    function NavController($state, $uibModal, $ngRedux, $window) {\n        'ngInject';\n\n        _classCallCheck(this, NavController);\n\n        this.$state = $state;\n        this.$uibModal = $uibModal;\n        this.exportFormats = _index.formats;\n        this.$window = $window;\n\n        this.unsubscribe = $ngRedux.connect(this.mapStateToThis, { sourceChanged: _actions.sourceChanged, githubLoggedIn: _actions.githubLoggedIn, githubLogout: _actions.githubLogout, exported: _actions.exported })(this);\n    }\n\n    _createClass(NavController, [{\n        key: '$onDestroy',\n        value: function $onDestroy() {\n            this.unsubscribe();\n        }\n    }, {\n        key: 'mapStateToThis',\n        value: function mapStateToThis(state) {\n            return {\n                text: state.source,\n                zoom: state.zoomNodeId,\n                user: state.user\n            };\n        }\n    }, {\n        key: 'href',\n        value: function href(zoom) {\n            return this.$state.href('load', {\n                data: (0, _index.uriEncode)(this.text),\n                zoom: zoom\n            });\n        }\n    }, {\n        key: 'export',\n        value: function _export(format) {\n            this.exported({ format: format });\n        }\n    }, {\n        key: 'import',\n        value: function _import(files) {\n            var _this = this;\n\n            if (files) {\n                (0, _importer.readAllText)(files[0]).then(function (text) {\n                    return _this._onImport(text);\n                });\n            }\n        }\n\n        // TODO: make this a route\n\n    }, {\n        key: 'openAbout',\n        value: function openAbout() {\n            this.$uibModal.open({\n                component: aboutComponent.name\n            });\n        }\n    }, {\n        key: '_onImport',\n        value: function _onImport(source) {\n            this.sourceChanged({ source: source });\n        }\n    }, {\n        key: 'login',\n        value: function login() {\n            var _this2 = this;\n\n            var expectedOrigin = new URL(githubLoginPopupUrl).origin;\n            this.$window.open(githubLoginPopupUrl, 'Github authentication');\n\n            this.$window.addEventListener('message', function (event) {\n                if (event.origin === expectedOrigin) {\n                    _this2.githubLoggedIn({ token: event.data.payload.token });\n                }\n            }, { capture: false, once: true });\n        }\n    }]);\n\n    return NavController;\n}();\n\nvar name = exports.name = \"c4LabNav\";\nvar options = exports.options = {\n    template: _nav2.default,\n    controller: NavController\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(23)))\n\n/***/ }),\n\n/***/ 601:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = \"<nav class=\\\"navbar navbar-default\\\">\\n    <div class=\\\"container-fluid\\\">\\n        <div class=\\\"navbar-header\\\">\\n            <a class=\\\"navbar-brand\\\" href=\\\"#\\\">C4 Lab</a>\\n        </div>\\n\\n        <p class=\\\"navbar-text navbar-right c4lab-build\\\">\\n            <c4-lab-build-info></c4-lab-build-info>\\n        </p>\\n\\n        <div class=\\\"navbar-collapse collapse\\\">\\n            <ul class=\\\"nav navbar-nav\\\">\\n                <li>\\n                    <a popover-placement=\\\"bottom\\\" uib-popover-template=\\\"'_share.html'\\\" analytics-on=\\\"click\\\"\\n                        analytics-event=\\\"share\\\">\\n                        <span class=\\\"glyphicon glyphicon-duplicate\\\"> </span> Share\\n                    </a>\\n                </li>\\n                <li>\\n                    <a ngf-select=\\\"$ctrl.import($files)\\\" ngf-pattern=\\\"'.sexp'\\\" ngf-accept=\\\"'.sexp'\\\" analytics-on=\\\"click\\\"\\n                        analytics-event=\\\"import\\\">\\n                        <span class=\\\"glyphicon glyphicon-open-file\\\"> </span> Import\\n                    </a>\\n                </li>\\n                <li class=\\\"dropdown\\\" uib-dropdown>\\n                    <a uib-dropdown-toggle>\\n                        <span class=\\\"glyphicon glyphicon-picture\\\"> </span> Export <span class=\\\"caret\\\"></span>\\n                    </a>\\n                    <ul id=\\\"export-format-list\\\" class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n                        <li ng-repeat=\\\"format in $ctrl.exportFormats\\\">\\n                            <a ng-click=\\\"$ctrl.export(format)\\\" analytics-on=\\\"click\\\" analytics-event=\\\"export\\\"\\n                                analytics-label=\\\"{{format}}\\\">{{format}}</a>\\n                        </li>\\n                        <li ng-if=\\\"$ctrl.user\\\">\\n                            <a ng-click=\\\"$ctrl.export('gist')\\\" analytics-on=\\\"click\\\" analytics-event=\\\"export\\\"\\n                                analytics-label=\\\"gist\\\">GitHub Private Gist&nbsp;<img src=\\\"\" + __webpack_require__(602) + \"\\\"></a>\\n                        </li>\\n                    </ul>\\n                </li>\\n                <li>\\n                    <!-- TODO: make this a modal route-->\\n                    <a href=\\\"#\\\" ng-click=\\\"$ctrl.openAbout()\\\" analytics-on=\\\"click\\\" analytics-event=\\\"about\\\">\\n                        <span class=\\\"glyphicon glyphicon-info-sign\\\"> </span> About\\n                    </a>\\n                </li>\\n                <li>\\n                    <a ui-sref=\\\"help\\\">\\n                        <span class=\\\"glyphicon glyphicon-question-sign\\\"> </span> Help\\n                    </a>\\n                </li>\\n                <p class=\\\"navbar-text\\\" ng-if=\\\"$ctrl.user\\\">\\n                    <img ng-src=\\\"{{$ctrl.user.avatarUrl}}\\\" height=20 class=\\\"img-circle\\\">\\n                    {{$ctrl.user.login}}\\n                    <a href=\\\"#\\\" class=\\\"navbar-link\\\" ng-click=\\\"$ctrl.githubLogout()\\\">Logout</a>\\n                </p>\\n                <li ng-if=\\\"!$ctrl.user\\\">\\n                    <a href=\\\"#\\\" ng-click=\\\"$ctrl.login()\\\">\\n                        Login with Github\\n                    </a>\\n                </li>\\n            </ul>\\n        </div>\\n    </div>\\n</nav>\\n\\n<script type=\\\"text/ng-template\\\" id=\\\"_share.html\\\">\\n    <div style=\\\"width:10em;\\\">\\n        <a ng-href=\\\"{{$ctrl.href($ctrl.zoom)}}\\\" target=\\\"_blank\\\">\\n            <span class=\\\"glyphicon glyphicon-new-window\\\" > </span>\\n            Link to this page</a>\\n    </div>\\n</script>\";\n\n/***/ }),\n\n/***/ 602:\n/***/ (function(module, exports) {\n\nmodule.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyQTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyQjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTI4OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTI5OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+m4QGuQAAAyRJREFUeNrEl21ojWEYx895TDPbMNlBK46IUiNmPvHBSUjaqc0H8pF5+aDUKPEBqU2NhRQpX5Rv5jWlDIWlMCv7MMSWsWwmb3tpXub4XXWdPHvc9/Gc41nu+nedc7/8r/99PffLdYdDPsvkwsgkTBwsA/PADJCnzX2gHTwBt8Hl7p537/3whn04XoDZDcpBlk+9P8AFcAghzRkJwPF4zGGw0Y9QS0mAM2AnQj77FqCzrtcwB1Hk81SYojHK4DyGuQ6mhIIrBWB9Xm7ug/6B/nZrBHBegrkFxoVGpnwBMSLR9EcEcC4qb8pP14BWcBcUgewMnF3T34VqhWMFkThLJAalwnENOAKiHpJq1FZgI2AT6HZtuxZwR9GidSHtI30jOrbawxlVX78/AbNfhHlomEUJJI89O2MqeE79T8/nk8nMBm/dK576hZgmA3cp/R4l9/UeSxiHLVIlNm4nFfT0bxyuIj7LHRTKai+zdJobwMKzcZSJb0ePV5PKN+BqAAKE47UlMnERELMM3EdYP/yrd+XYb2mOiYBiQ8OQnoRBlXrl9JZix7D1pHTazu4MoyBcnYamqAjIMTR8G4FT8LuhLsexXYYjICBiqhQBvYb6fLZIJCjPypVvaOoVAW2WcasCnL2Nq82xHJNSqlCeFcDshaPK0twkAhosjZL31QYw+1rlMpWGMArl23SBsZZO58F2tlJXmjOXS+s4WGvpMiBJT/I2PInZ6lIs9/hBsNS1hS6BG0DSqmYEDRlCXQrmy50P1oDRKTSegmNbUsA0zDMwRhPJXeCE3vWLPQMvan6X8AgIa1vcR4AkGZkDR4ejJ1UHpsaVI0g2LInpOsNFUud1rhxSV+fzC9Woz2EZkWQuja7/B+jUrgtIMpy9YCW4n4K41YfzRneW5E1KJTe4B2Zq1Q5EHEtj4U3AfEzR5SVY4l7QYQPJdN2as7RKBF0BPZqqH4VgMAMBL8Byxr7y8zCZiDlnOcEKIPmUpgB5Z2ww5RdOiiRiNajUmWda5IG6WbhsyY2fx6m8gLcoJDJFkH219M3We1+cnda93pfycZpIJEL/s/wSYADmOAwAQgdpBAAAAABJRU5ErkJggg==\"\n\n/***/ }),\n\n/***/ 603:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 604:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parse = exports.NameNotFoundError = exports.OptsNotFoundError = exports.InvalidDirectionError = exports.ParseError = undefined;\n\nvar _ParseError = __webpack_require__(62);\n\nObject.defineProperty(exports, 'ParseError', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_ParseError).default;\n  }\n});\n\nvar _InvalidDirectionError = __webpack_require__(281);\n\nObject.defineProperty(exports, 'InvalidDirectionError', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_InvalidDirectionError).default;\n  }\n});\n\nvar _OptsNotFoundError = __webpack_require__(282);\n\nObject.defineProperty(exports, 'OptsNotFoundError', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_OptsNotFoundError).default;\n  }\n});\n\nvar _NameNotFoundError = __webpack_require__(283);\n\nObject.defineProperty(exports, 'NameNotFoundError', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_NameNotFoundError).default;\n  }\n});\n\nvar _Parser = __webpack_require__(605);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar parse = exports.parse = function parse(text) {\n  return new _Parser.Parser().parse(text);\n};\n\n/***/ }),\n\n/***/ 605:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Parser = exports.pathToId = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _path = __webpack_require__(606);\n\nvar path = _interopRequireWildcard(_path);\n\nvar _sexprPlus = __webpack_require__(607);\n\nvar sexp = _interopRequireWildcard(_sexprPlus);\n\nvar _md = __webpack_require__(608);\n\nvar _interfaces = __webpack_require__(609);\n\nvar _InvalidDirectionError = __webpack_require__(281);\n\nvar _InvalidDirectionError2 = _interopRequireDefault(_InvalidDirectionError);\n\nvar _NameNotFoundError = __webpack_require__(283);\n\nvar _NameNotFoundError2 = _interopRequireDefault(_NameNotFoundError);\n\nvar _OptsNotFoundError = __webpack_require__(282);\n\nvar _OptsNotFoundError2 = _interopRequireDefault(_OptsNotFoundError);\n\nvar _ParseError = __webpack_require__(62);\n\nvar _ParseError2 = _interopRequireDefault(_ParseError);\n\nvar _TitleNotAStringError = __webpack_require__(610);\n\nvar _TitleNotAStringError2 = _interopRequireDefault(_TitleNotAStringError);\n\nvar _TitleNotAtTopLevelError = __webpack_require__(611);\n\nvar _TitleNotAtTopLevelError2 = _interopRequireDefault(_TitleNotAtTopLevelError);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\nvar pathToId = exports.pathToId = function pathToId(p) {\n    return _md.Md5.hashStr(p, false);\n};\nfunction isString(x) {\n    return x && x.type === 'string';\n}\nfunction isList(x) {\n    return x && x.type === 'list';\n}\nfunction isAtom(x) {\n    return x && x.type === 'atom';\n}\nvar stripComments = function stripComments(text) {\n    return text.replace(/^\\s*;;.*$/gm, '');\n};\nvar keywordAliases = [{ from: /^:desc.*/i, to: 'description' }, { from: /^:to/i, to: 'to' }, { from: /^:tech/i, to: 'tech' }, { from: /^:dir.*/i, to: 'direction' }];\nfunction canonicalize(key) {\n    return keywordAliases.filter(function (_ref) {\n        var from = _ref.from;\n        return from.test(key);\n    }).map(function (_ref2) {\n        var to = _ref2.to;\n        return to;\n    })[0] || key;\n}\nfunction parseKeywordArgs(kwargs) {\n    var allowed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : /.*/;\n\n    if (kwargs.length === 0) {\n        return {};\n    }\n\n    var _kwargs = _toArray(kwargs),\n        keyword = _kwargs[0],\n        value = _kwargs[1],\n        rest = _kwargs.slice(2);\n\n    if (!isAtom(keyword)) {\n        throw new Error('Expected keyword to be an atom');\n    }\n    if (!isString(value)) {\n        throw new Error('Expected value to be a string');\n    }\n    var key = canonicalize(keyword.content);\n    return Object.assign(allowed.test(key) ? _defineProperty({}, key, value.content) : {}, parseKeywordArgs(rest, allowed));\n}\n\nvar Parser = exports.Parser = function () {\n    function Parser() {\n        _classCallCheck(this, Parser);\n\n        this.graphTitle = '';\n        this.idMap = {};\n        this.pathMap = {};\n        this.edges = [];\n        this.items = [];\n    }\n\n    _createClass(Parser, [{\n        key: 'parse',\n        value: function parse(text) {\n            var tokens = sexp.parse(text);\n            this.buildIR(tokens);\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = this.edges[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var e = _step.value;\n\n                    this.postProcessEdge(e);\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            return {\n                edges: this.edges,\n                idMap: this.idMap,\n                items: this.items,\n                pathMap: this.pathMap,\n                roots: this.items.filter(function (x) {\n                    return !x.parentId;\n                }).map(function (x) {\n                    return x.id;\n                }),\n                title: this.graphTitle\n            };\n        }\n    }, {\n        key: 'buildIR',\n        value: function buildIR(tokens, parent) {\n            var _this = this;\n\n            return tokens.map(function (x) {\n                return _this.buildIRNode(x, parent);\n            });\n        }\n    }, {\n        key: 'buildIRNode',\n        value: function buildIRNode(token, parent) {\n            if (!isList(token)) {\n                throw new Error('bare string not permitted');\n            }\n\n            var _token$content = _toArray(token.content),\n                head = _token$content[0],\n                tail = _token$content.slice(1);\n\n            if (!isAtom(head)) {\n                throw new Error('expected atom, found ' + head.type);\n            }\n            var node = this._buildIRNode(head.content, tail, parent);\n            if (!node) {\n                return null;\n            }\n            if (!(0, _interfaces.isEdge)(node) && !node.children.every(_interfaces.isEdge)) {\n                node.canExpand = true;\n            }\n            return node;\n        }\n    }, {\n        key: '_buildIRNode',\n        value: function _buildIRNode(head, tail, parent) {\n            var type = head.replace(/^def(ine)?-/i, '').toLowerCase().trim();\n            switch (type) {\n                case 'edge':\n                    return this.edge(tail, parent);\n                case 'title':\n                    this.title(tail, parent);\n                    return null;\n                default:\n                    return this.item(type, tail, parent);\n            }\n        }\n    }, {\n        key: 'item',\n        value: function item(type, tokens, parent) {\n            var _tokens = _toArray(tokens),\n                opts = _tokens[0],\n                children = _tokens.slice(1);\n\n            if (!isList(opts)) {\n                throw new _OptsNotFoundError2.default(type);\n            }\n\n            var _opts$content = _toArray(opts.content),\n                name = _opts$content[0],\n                kwargs = _opts$content.slice(1);\n\n            if (!isString(name) || name.content === '') {\n                throw new _NameNotFoundError2.default(type);\n            }\n            var p = this.pathToNode(name.content, parent).toString();\n            var node = {\n                children: [],\n                id: pathToId(p),\n                name: name.content,\n                path: p,\n                type: type\n            };\n            if (parent) {\n                node.parentId = parent.id;\n            }\n            this.idMap[node.id] = node;\n            this.pathMap[node.path] = node.id;\n            Object.assign(node, parseKeywordArgs(kwargs, /description|tech/));\n            this.items.push(node);\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n                for (var _iterator2 = this.buildIR(children, node)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                    var n = _step2.value;\n\n                    if (n) {\n                        node.children.push(n);\n                    }\n                }\n            } catch (err) {\n                _didIteratorError2 = true;\n                _iteratorError2 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                        _iterator2.return();\n                    }\n                } finally {\n                    if (_didIteratorError2) {\n                        throw _iteratorError2;\n                    }\n                }\n            }\n\n            return node;\n        }\n    }, {\n        key: 'edge',\n        value: function edge(kwargs, parent) {\n            if (!parent) {\n                throw new Error('edge at top level?');\n            }\n            var edge = Object.assign({ sourceId: parent.id, type: 'edge' }, parseKeywordArgs(kwargs, /description|to|tech|direction/));\n            this.edges.push(edge);\n            return edge;\n        }\n    }, {\n        key: 'title',\n        value: function title(_ref4, parent) {\n            var _ref5 = _slicedToArray(_ref4, 1),\n                input = _ref5[0];\n\n            if (!isString(input)) {\n                throw new _TitleNotAStringError2.default(input.toString());\n            }\n            if (parent) {\n                throw new _TitleNotAtTopLevelError2.default();\n            }\n            this.graphTitle = input.content;\n        }\n    }, {\n        key: 'pathToNode',\n        value: function pathToNode(name, parent) {\n            return parent ? this.idMap[parent.id].path + '/' + name : name;\n        }\n    }, {\n        key: 'postProcessEdge',\n        value: function postProcessEdge(edge) {\n            if (edge.to.startsWith('.')) {\n                var src = this.idMap[edge.sourceId];\n                if (!src.parentId) {\n                    throw new Error('relative paths have to have a parent');\n                }\n                var parent = this.idMap[src.parentId];\n                edge.to = path.join(parent.path, edge.to);\n            }\n            edge.destinationId = this.pathMap[edge.to];\n            if (!edge.destinationId) {\n                throw new _ParseError2.default('Could not find node \\'' + edge.to + '\\'');\n            }\n            if (edge.sourceId === edge.destinationId) {\n                throw new _ParseError2.default('Edge cannot be both from and to \\'' + edge.to + '\\'');\n            }\n            if (edge.direction) {\n                if (/^(push|pull|both)$/i.test(edge.direction)) {\n                    edge.direction = edge.direction.toLowerCase();\n                } else {\n                    throw new _InvalidDirectionError2.default(edge.direction);\n                }\n            }\n            edge.id = pathToId(edge.sourceId + edge.destinationId);\n            edge.sourceParentIds = this.findParentIds(edge.sourceId);\n            edge.destinationParentIds = this.findParentIds(edge.destinationId);\n        }\n    }, {\n        key: 'findParentIds',\n        value: function findParentIds(id) {\n            var node = this.idMap[id];\n            if (!node.parentId) {\n                return [];\n            }\n            return [node.parentId].concat(this.findParentIds(node.parentId));\n        }\n    }]);\n\n    return Parser;\n}();\n/*\nTODO: detect errors:\n\n* duplicate paths\n\n*/\n\n/***/ }),\n\n/***/ 609:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.isEdge = isEdge;\nfunction isEdge(x) {\n    return x.type === 'edge';\n}\n\n/***/ }),\n\n/***/ 610:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _ParseError2 = __webpack_require__(62);\n\nvar _ParseError3 = _interopRequireDefault(_ParseError2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TitleNotAStringError = function (_ParseError) {\n    _inherits(TitleNotAStringError, _ParseError);\n\n    function TitleNotAStringError(input) {\n        _classCallCheck(this, TitleNotAStringError);\n\n        return _possibleConstructorReturn(this, (TitleNotAStringError.__proto__ || Object.getPrototypeOf(TitleNotAStringError)).call(this, 'title must be a string, was: ' + JSON.stringify(input)));\n    }\n\n    return TitleNotAStringError;\n}(_ParseError3.default);\n\nexports.default = TitleNotAStringError;\n\n/***/ }),\n\n/***/ 611:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _ParseError2 = __webpack_require__(62);\n\nvar _ParseError3 = _interopRequireDefault(_ParseError2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TitleNotAtTopLevelError = function (_ParseError) {\n    _inherits(TitleNotAtTopLevelError, _ParseError);\n\n    function TitleNotAtTopLevelError() {\n        _classCallCheck(this, TitleNotAtTopLevelError);\n\n        return _possibleConstructorReturn(this, (TitleNotAtTopLevelError.__proto__ || Object.getPrototypeOf(TitleNotAtTopLevelError)).call(this, 'title is only allowed at the top level'));\n    }\n\n    return TitleNotAtTopLevelError;\n}(_ParseError3.default);\n\nexports.default = TitleNotAtTopLevelError;\n\n/***/ }),\n\n/***/ 614:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar LOCALSTORAGE_KEY = 'C4-LAB-ACTIVE-DOC-VNEXT';\n\nvar DataStore = exports.DataStore = function () {\n    function DataStore(localStorage) {\n        _classCallCheck(this, DataStore);\n\n        this.localStorage = localStorage;\n    }\n\n    _createClass(DataStore, [{\n        key: 'load',\n        value: function load() {\n            return this.localStorage.getItem(LOCALSTORAGE_KEY);\n        }\n    }, {\n        key: 'save',\n        value: function save(text) {\n            this.localStorage.setItem(LOCALSTORAGE_KEY, text);\n        }\n    }]);\n\n    return DataStore;\n}();\n\n/***/ }),\n\n/***/ 615:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Exporter = exports.formats = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _codegen = __webpack_require__(284);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar formats = exports.formats = 'sexp dot png'.split(' ');\n\nvar Exporter = function () {\n    function Exporter(document) {\n        _classCallCheck(this, Exporter);\n\n        this.createElement = function (e) {\n            return document.createElement(e);\n        };\n    }\n\n    _createClass(Exporter, [{\n        key: 'export',\n        value: function _export(format, title, text, dot) {\n            var safeTitle = title || 'c4-lab-graph';\n            switch (format) {\n                case 'sexp':\n                    return this.sexp(safeTitle, text);\n                case 'dot':\n                    return this.dot(safeTitle, dot);\n                case 'png':\n                    return this.png(safeTitle, dot);\n                default:\n                    throw new Error('unknown format: ' + format);\n            }\n        }\n    }, {\n        key: 'sexp',\n        value: function sexp(title, text) {\n            this.downloadFile(title + '.sexp', text, 'text/plain');\n        }\n    }, {\n        key: 'dot',\n        value: function dot(title, _dot) {\n            this.downloadFile(title + '.dot', _dot, 'text/plain');\n        }\n    }, {\n        key: 'png',\n        value: function png(title, dot) {\n            var _this = this;\n\n            (0, _codegen.toPngDataUri)(dot, this.createElement).then(function (dataUri) {\n                return _this.downloadFile(title + '.png', dataUri);\n            });\n        }\n    }, {\n        key: 'downloadFile',\n        value: function downloadFile(filename, content, contentType) {\n            var a = this.createElement('a');\n            a.download = filename;\n            if (contentType) {\n                a.href = 'data:' + contentType + ',' + encodeURIComponent(content);\n            } else {\n                a.href = content;\n            }\n            a.click();\n        }\n    }]);\n\n    return Exporter;\n}();\n\nexports.Exporter = Exporter;\n\n/***/ }),\n\n/***/ 616:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.toDot = exports.DotContext = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _lodash = __webpack_require__(617);\n\nvar _wordwrap = __webpack_require__(618);\n\nvar wordwrap = _interopRequireWildcard(_wordwrap);\n\nvar _DOT = __webpack_require__(619);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEFAULT_SHAPE = 'box';\nvar typeShapeMap = {\n    actor: 'egg',\n    component: 'component',\n    container: 'box3d'\n};\nvar VERBOSE = false;\nvar INDENT = '  ';\n\nvar DotContext = exports.DotContext = function () {\n    function DotContext(hrefTo) {\n        _classCallCheck(this, DotContext);\n\n        this.visibleIds = [];\n        this.visibleEdges = [];\n        // TODO: why doesn't `wordwrap(30)` work? Something about typescript definitions\n        this.wordwrap = wordwrap.soft(0, 30);\n        this.hrefTo = hrefTo;\n    }\n\n    _createClass(DotContext, [{\n        key: 'load',\n        value: function load(graph, zoomNodeId) {\n            var _this = this;\n\n            this.graph = graph;\n            this.zoomNodeId = zoomNodeId;\n            this.visibleIds = zoomNodeId ? this.findVisibleNodes(zoomNodeId) : graph.roots;\n            this.visibleIds.sort();\n            this.visibleEdges = graph.edges.filter(function (x) {\n                return _this.isEdgeVisible(x);\n            });\n        }\n    }, {\n        key: 'draw',\n        value: function draw() {\n            return [].concat(_toConsumableArray(this._draw())).join('\\n');\n        }\n    }, {\n        key: '_draw',\n        value: /*#__PURE__*/regeneratorRuntime.mark(function _draw() {\n            var _this2 = this;\n\n            return regeneratorRuntime.wrap(function _draw$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            _context.next = 2;\n                            return 'digraph g {';\n\n                        case 2:\n                            return _context.delegateYield(this.digraphHeaders(INDENT), 't0', 3);\n\n                        case 3:\n                            if (!this.rootNode) {\n                                _context.next = 11;\n                                break;\n                            }\n\n                            if (!this.rootNode.parentId) {\n                                _context.next = 8;\n                                break;\n                            }\n\n                            return _context.delegateYield(this.drawChildCluster(INDENT, this.rootNode.parentId), 't1', 6);\n\n                        case 6:\n                            _context.next = 9;\n                            break;\n\n                        case 8:\n                            return _context.delegateYield(this.drawCluster(INDENT, this.rootNode), 't2', 9);\n\n                        case 9:\n                            _context.next = 12;\n                            break;\n\n                        case 11:\n                            return _context.delegateYield(this.drawItems(this.visibleIds, INDENT), 't3', 12);\n\n                        case 12:\n                            _context.next = 14;\n                            return '';\n\n                        case 14:\n                            return _context.delegateYield(this.visibleEdges.map(function (x) {\n                                return _this2.drawEdge(x, INDENT);\n                            }), 't4', 15);\n\n                        case 15:\n                            _context.next = 17;\n                            return '}';\n\n                        case 17:\n                            _context.next = 19;\n                            return '';\n\n                        case 19:\n                        case 'end':\n                            return _context.stop();\n                    }\n                }\n            }, _draw, this);\n        })\n    }, {\n        key: 'findVisibleNodes',\n        value: function findVisibleNodes(zoomNodeId) {\n            if (!this.graph) {\n                throw new Error('must have a graph');\n            }\n            this.rootNode = this.graph.idMap[zoomNodeId];\n            var visibleNodes = this.rootNode.children.concat([this.rootNode]);\n            if (this.rootNode.parentId) {\n                var parent = this.graph.idMap[this.rootNode.parentId];\n                visibleNodes = visibleNodes.concat(parent.children);\n                visibleNodes.push(parent);\n            }\n            var visibleIds = visibleNodes.map(function (x) {\n                return x.id;\n            }).concat(this.graph.roots).filter(function (x) {\n                return x;\n            });\n            return (0, _lodash.uniq)(visibleIds);\n        }\n    }, {\n        key: 'toDotId',\n        value: function toDotId(nodeOrId) {\n            var id = (0, _lodash.isString)(nodeOrId) ? nodeOrId : nodeOrId.id;\n            return 'g' + this.visibleIds.indexOf(id);\n        }\n    }, {\n        key: 'toDescription',\n        value: function toDescription(nodeOrText) {\n            var htmlNewlines = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            var text = (0, _lodash.isString)(nodeOrText) ? nodeOrText : nodeOrText.description;\n            if (!text) {\n                return '';\n            }\n            var wrapped = this.wordwrap(text);\n            return htmlNewlines ? wrapped.replace(/\\n/g, '<br/>\\n') : wrapped;\n        }\n    }, {\n        key: 'toLabel',\n        value: function toLabel(edgeOrText) {\n            return this.toDescription(edgeOrText, false).replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n');\n        }\n    }, {\n        key: 'isEdgeVisible',\n        value: function isEdgeVisible(edge) {\n            return this.isIdVisible(edge.sourceId) || this.isIdVisible(edge.destinationId) || this.isCrossingSystems(edge);\n        }\n    }, {\n        key: 'isCrossingSystems',\n        value: function isCrossingSystems(edge) {\n            var visibleSourceIds = this.findVisibleIds(edge.sourceParentIds);\n            var visibleDestinationIds = this.findVisibleIds(edge.destinationParentIds);\n            return visibleSourceIds[0] !== visibleDestinationIds[0];\n        }\n    }, {\n        key: 'findVisibleIds',\n        value: function findVisibleIds(ids) {\n            var _this3 = this;\n\n            return ids.filter(function (x) {\n                return _this3.isIdVisible(x);\n            });\n        }\n    }, {\n        key: 'isIdVisible',\n        value: function isIdVisible(id) {\n            return this.visibleIds.includes(id);\n        }\n    }, {\n        key: 'drawCluster',\n        value: /*#__PURE__*/regeneratorRuntime.mark(function drawCluster(indent, rootNode) {\n            var style = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'rounded';\n            var dotId, label, nonClustered;\n            return regeneratorRuntime.wrap(function drawCluster$(_context2) {\n                while (1) {\n                    switch (_context2.prev = _context2.next) {\n                        case 0:\n                            if (this.graph) {\n                                _context2.next = 2;\n                                break;\n                            }\n\n                            throw new Error('must have a graph');\n\n                        case 2:\n                            dotId = this.toDotId(rootNode);\n                            label = this.toLabel(rootNode.name);\n\n                            if (!VERBOSE) {\n                                _context2.next = 7;\n                                break;\n                            }\n\n                            _context2.next = 7;\n                            return indent + '# <drawCluster>';\n\n                        case 7:\n                            _context2.next = 9;\n                            return indent + 'subgraph cluster_' + dotId + ' {\\n' + indent + '  label=<' + _DOT.DOT.b(label) + '> style=\"' + style + '\"';\n\n                        case 9:\n                            _context2.next = 11;\n                            return '';\n\n                        case 11:\n                            _context2.next = 13;\n                            return indent + '  ' + dotId + ' [style=\"invisible\"]';\n\n                        case 13:\n                            _context2.next = 15;\n                            return '';\n\n                        case 15:\n                            return _context2.delegateYield(this.drawItems(rootNode.children, indent + INDENT), 't0', 16);\n\n                        case 16:\n                            _context2.next = 18;\n                            return indent + '}';\n\n                        case 18:\n                            if (rootNode.parentId) {\n                                _context2.next = 21;\n                                break;\n                            }\n\n                            nonClustered = this.graph.roots.filter(function (x) {\n                                return x !== rootNode.id;\n                            }).filter(function (x) {\n                                return x !== rootNode.parentId;\n                            });\n                            return _context2.delegateYield(this.drawItems(nonClustered, indent), 't1', 21);\n\n                        case 21:\n                            if (!VERBOSE) {\n                                _context2.next = 24;\n                                break;\n                            }\n\n                            _context2.next = 24;\n                            return indent + '# </drawCluster>';\n\n                        case 24:\n                        case 'end':\n                            return _context2.stop();\n                    }\n                }\n            }, drawCluster, this);\n        })\n    }, {\n        key: 'drawChildCluster',\n        value: /*#__PURE__*/regeneratorRuntime.mark(function drawChildCluster(indent, parentId) {\n            var _this4 = this;\n\n            var parent, dotId, label, nonClustered, otherChildren, nextIndent;\n            return regeneratorRuntime.wrap(function drawChildCluster$(_context3) {\n                while (1) {\n                    switch (_context3.prev = _context3.next) {\n                        case 0:\n                            if (this.graph) {\n                                _context3.next = 2;\n                                break;\n                            }\n\n                            throw new Error('must have a graph');\n\n                        case 2:\n                            if (this.rootNode) {\n                                _context3.next = 4;\n                                break;\n                            }\n\n                            throw new Error('must have a rootNode');\n\n                        case 4:\n                            parent = this.graph.idMap[parentId];\n                            dotId = this.toDotId(parent);\n                            label = this.toLabel(parent.name);\n                            nonClustered = this.graph.roots.filter(function (x) {\n                                return x !== parent.id;\n                            });\n                            otherChildren = parent.children.filter(function (x) {\n                                return x !== _this4.rootNode;\n                            });\n                            nextIndent = '' + indent + INDENT;\n\n                            if (!VERBOSE) {\n                                _context3.next = 13;\n                                break;\n                            }\n\n                            _context3.next = 13;\n                            return indent + '# <drawChildCluster>';\n\n                        case 13:\n                            _context3.next = 15;\n                            return indent + 'subgraph cluster_' + dotId + ' {';\n\n                        case 15:\n                            _context3.next = 17;\n                            return nextIndent + 'label=<' + _DOT.DOT.b(label) + '> style=\"rounded\"';\n\n                        case 17:\n                            _context3.next = 19;\n                            return '';\n\n                        case 19:\n                            _context3.next = 21;\n                            return '' + nextIndent + dotId + ' [style=\"invisible\"]';\n\n                        case 21:\n                            return _context3.delegateYield(this.drawItems(otherChildren, nextIndent), 't0', 22);\n\n                        case 22:\n                            _context3.next = 24;\n                            return '';\n\n                        case 24:\n                            return _context3.delegateYield(this.drawCluster(nextIndent, this.rootNode, 'solid'), 't1', 25);\n\n                        case 25:\n                            _context3.next = 27;\n                            return indent + '}';\n\n                        case 27:\n                            return _context3.delegateYield(this.drawItems(nonClustered, indent), 't2', 28);\n\n                        case 28:\n                            if (!VERBOSE) {\n                                _context3.next = 31;\n                                break;\n                            }\n\n                            _context3.next = 31;\n                            return indent + '# </drawChildCluster>';\n\n                        case 31:\n                        case 'end':\n                            return _context3.stop();\n                    }\n                }\n            }, drawChildCluster, this);\n        })\n    }, {\n        key: 'digraphHeaders',\n        value: /*#__PURE__*/regeneratorRuntime.mark(function digraphHeaders(indent) {\n            return regeneratorRuntime.wrap(function digraphHeaders$(_context4) {\n                while (1) {\n                    switch (_context4.prev = _context4.next) {\n                        case 0:\n                            if (this.graph) {\n                                _context4.next = 2;\n                                break;\n                            }\n\n                            throw new Error('must have a graph');\n\n                        case 2:\n                            _context4.next = 4;\n                            return indent + 'compound=true';\n\n                        case 4:\n                            if (!this.graph.title) {\n                                _context4.next = 11;\n                                break;\n                            }\n\n                            _context4.next = 7;\n                            return indent + 'label=\"' + this.toLabel(this.graph.title) + '\"';\n\n                        case 7:\n                            _context4.next = 9;\n                            return indent + 'fontsize=20';\n\n                        case 9:\n                            _context4.next = 11;\n                            return indent + 'labelloc=t';\n\n                        case 11:\n                            _context4.next = 13;\n                            return indent + 'node[fontsize=12]';\n\n                        case 13:\n                            _context4.next = 15;\n                            return indent + 'edge[fontsize=12]';\n\n                        case 15:\n                            _context4.next = 17;\n                            return '';\n\n                        case 17:\n                        case 'end':\n                            return _context4.stop();\n                    }\n                }\n            }, digraphHeaders, this);\n        })\n    }, {\n        key: 'toTechDescription',\n        value: function toTechDescription(text) {\n            if (!text) {\n                return '';\n            }\n            text = this.toDescription(text);\n            text = _DOT.DOT.font('#666666', _DOT.DOT.i('&#171;' + text + '&#187;'));\n            return '\\n<br/>\\n' + text + '\\n<br/>';\n        }\n    }, {\n        key: 'drawItems',\n        value: /*#__PURE__*/regeneratorRuntime.mark(function drawItems(nodesOrIds, indent) {\n            var _this5 = this;\n\n            var idMap;\n            return regeneratorRuntime.wrap(function drawItems$(_context5) {\n                while (1) {\n                    switch (_context5.prev = _context5.next) {\n                        case 0:\n                            if (this.graph) {\n                                _context5.next = 2;\n                                break;\n                            }\n\n                            throw new Error('must have a graph');\n\n                        case 2:\n                            idMap = this.graph.idMap;\n\n                            if (!VERBOSE) {\n                                _context5.next = 6;\n                                break;\n                            }\n\n                            _context5.next = 6;\n                            return indent + '# <drawItems>';\n\n                        case 6:\n                            return _context5.delegateYield(nodesOrIds.map(function (x) {\n                                return (0, _lodash.isString)(x) ? idMap[x] : x;\n                            }).filter(function (x) {\n                                return x.type !== 'edge';\n                            }).map(function (x) {\n                                return _this5.drawItem(x, indent);\n                            }), 't0', 7);\n\n                        case 7:\n                            if (!VERBOSE) {\n                                _context5.next = 10;\n                                break;\n                            }\n\n                            _context5.next = 10;\n                            return indent + '# </drawItems>';\n\n                        case 10:\n                        case 'end':\n                            return _context5.stop();\n                    }\n                }\n            }, drawItems, this);\n        })\n    }, {\n        key: 'drawItem',\n        value: function drawItem(node, indent) {\n            var dotId = this.toDotId(node);\n            var tech = this.toTechDescription(node.tech);\n            var desc = node.description ? '\\n<br/>\\n' + this.toDescription(node) : '';\n            var shape = typeShapeMap[node.type] || DEFAULT_SHAPE;\n            var attrs = {\n                shape: shape\n            };\n            var name = _DOT.DOT.b(node.name);\n            if (this.hrefTo && node.children && node.children.some(function (x) {\n                return x.type !== 'edge';\n            })) {\n                attrs.href = this.hrefTo(node.id);\n                attrs.tooltip = 'See more details about ' + node.name;\n                name = _DOT.DOT.font('blue', _DOT.DOT.u(name));\n            }\n            attrs.label = '<\\n' + name + tech + desc + '\\n' + indent + '>';\n            return '' + indent + dotId + ' ' + _DOT.DOT.attrList(attrs);\n        }\n    }, {\n        key: 'drawEdge',\n        value: function drawEdge(edge, indent) {\n            var _this6 = this;\n\n            var srcOk = this.isIdVisible(edge.sourceId);\n            var dstOk = this.isIdVisible(edge.destinationId);\n            var getId = function getId(idOk, id, parentIds) {\n                var result = idOk ? id : parentIds.find(function (x) {\n                    return _this6.isIdVisible(x);\n                });\n                if (result) {\n                    return result;\n                }\n                throw new Error('Unknown id');\n            };\n            var srcId = getId(srcOk, edge.sourceId, edge.sourceParentIds);\n            var dstId = getId(dstOk, edge.destinationId, edge.destinationParentIds);\n            var src = this.toDotId(srcId);\n            var dst = this.toDotId(dstId);\n            var attrs = {};\n            if (edge.description) {\n                attrs.label = this.toLabel(edge);\n            }\n            if (!(srcOk && dstOk)) {\n                attrs.style = 'dashed';\n            }\n            if (srcId === this.zoomNodeId) {\n                attrs.ltail = 'cluster_' + src;\n            }\n            if (dstId === this.zoomNodeId) {\n                attrs.lhead = 'cluster_' + dst;\n            }\n            attrs.dir = this.getEdgeDirection(edge.direction);\n            return '' + indent + src + ' -> ' + dst + ' ' + _DOT.DOT.attrList(attrs);\n        }\n    }, {\n        key: 'getEdgeDirection',\n        value: function getEdgeDirection(direction) {\n            switch (direction) {\n                case 'both':\n                    return 'both';\n                case 'pull':\n                    return 'back';\n                default:\n                    return null;\n            }\n        }\n    }]);\n\n    return DotContext;\n}();\n/**\n * build a DOT representation of the graph\n */\n\n\nvar toDot = exports.toDot = function toDot(graph, zoomNodeId, hrefTo) {\n    var ctx = new DotContext(hrefTo);\n    ctx.load(graph, zoomNodeId);\n    return ctx.draw();\n};\n\n/***/ }),\n\n/***/ 619:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DOT = exports.DOT = function () {\n    function DOT() {\n        _classCallCheck(this, DOT);\n    }\n\n    _createClass(DOT, null, [{\n        key: 'i',\n        value: function i(text) {\n            return '<i>' + text + '</i>';\n        }\n    }, {\n        key: 'b',\n        value: function b(text) {\n            return '<b>' + text + '</b>';\n        }\n    }, {\n        key: 'u',\n        value: function u(text) {\n            return '<u>' + text + '</u>';\n        }\n    }, {\n        key: 'font',\n        value: function font(color, text) {\n            return '<font color=\"' + color + '\">' + text + '</font>';\n        }\n    }, {\n        key: 'attrList',\n        value: function attrList(attrs) {\n            var dotAttrs = Reflect.ownKeys(attrs).filter(function (x) {\n                return attrs[x];\n            }).map(function (x) {\n                return String(x) + '=' + DOT.quoteAttr(attrs[x]);\n            }).join(' ');\n            return '[' + dotAttrs + ']';\n        }\n    }, {\n        key: 'quoteAttr',\n        value: function quoteAttr(value) {\n            return (/^</.test(value) ? value : '\"' + value + '\"'\n            );\n        }\n    }]);\n\n    return DOT;\n}();\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    var instance = Reflect.construct(cls, Array.from(arguments));\n    Object.setPrototypeOf(instance, Object.getPrototypeOf(this));\n    return instance;\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nvar ParseError = function (_extendableBuiltin2) {\n  _inherits(ParseError, _extendableBuiltin2);\n\n  function ParseError() {\n    _classCallCheck(this, ParseError);\n\n    return _possibleConstructorReturn(this, (ParseError.__proto__ || Object.getPrototypeOf(ParseError)).apply(this, arguments));\n  }\n\n  return ParseError;\n}(_extendableBuiltin(Error));\n\nexports.default = ParseError;\n\n/***/ }),\n\n/***/ 620:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar readAllText = exports.readAllText = function readAllText(file) {\n    var reader = new FileReader();\n    return new Promise(function (resolve, reject) {\n        reader.onload = function (loadEvt) {\n            return resolve(loadEvt.target.result);\n        };\n        reader.onerror = reject;\n        reader.readAsText(file);\n    });\n};\n\n/***/ }),\n\n/***/ 621:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"modal-header\\\">\\n    <h3 class=\\\"modal-title\\\" id=\\\"modal-title\\\">About</h3>\\n</div>\\n<div class=\\\"modal-body\\\" id=\\\"modal-body\\\">\\n    <p>C4 Lab helps to create diagrams expressing a software architecture using a small lisp-like language, and share those\\n        diagrams as images or text.\\n    </p>\\n    <p>\\n        This is a based on <a href=\\\"http://www.simonbrown.je/\\\">Simon Brown</a>'s <a href=\\\"http://www.codingthearchitecture.com/2014/08/24/c4_model_poster.html\\\">C4</a>        approach: Context, Containers, Components, and Classes. See <a href=\\\"https://leanpub.com/visualising-software-architecture\\\">Visualising Software Architecture</a>        for more information.\\n    </p>\\n    <p>\\n        If you have any feedback or problems, please open a <a href=\\\"https://github.com/ryepup/c4-lab/issues\\\">issue on github</a>.\\n    </p>\\n    <c4-lab-build-info></c4-lab-build-info>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <button class=\\\"btn btn-primary\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.close()\\\">Close</button>\\n</div>\";\n\n/***/ }),\n\n/***/ 622:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _app = __webpack_require__(623);\n\nObject.keys(_app).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _app[key];\n    }\n  });\n});\n\n/***/ }),\n\n/***/ 623:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = exports.AppController = undefined;\n\nvar _app = __webpack_require__(624);\n\nvar _app2 = _interopRequireDefault(_app);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar AppController = exports.AppController = function AppController() {\n    'ngInject';\n\n    _classCallCheck(this, AppController);\n\n    this.codeExpanded = true;\n};\n\nvar name = exports.name = \"c4LabApp\";\nvar options = exports.options = {\n    template: _app2.default,\n    controller: AppController\n};\n\n/***/ }),\n\n/***/ 624:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<c4-lab-nav></c4-lab-nav>\\n<div class=\\\"container-fluid\\\">\\n    <div class=\\\"row\\\">\\n        <div ng-class=\\\"$ctrl.codeExpanded ? 'col-md-6' : 'col-md-4'\\\">\\n            <c4-lab-editor></c4-lab-editor>\\n\\n            <button class=\\\"btn btn-default btn-block\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.codeExpanded = !$ctrl.codeExpanded\\\">\\n                <span class=\\\"glyphicon\\\" ng-class=\\\"$ctrl.codeExpanded ? 'glyphicon-chevron-left' : 'glyphicon-chevron-right'\\\"></span>\\n                Show {{$ctrl.codeExpanded ? 'less' : 'more'}} code\\n            </button>\\n        </div>\\n        <div ng-class=\\\"$ctrl.codeExpanded ? 'col-md-6' : 'col-md-8'\\\">\\n            <c4-lab-viewer></c4-lab-viewer>\\n        </div>\\n    </div>\\n</div>\";\n\n/***/ }),\n\n/***/ 625:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = undefined;\n\nvar _template = __webpack_require__(626);\n\nvar _template2 = _interopRequireDefault(_template);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BuildInfoController = function BuildInfoController() {\n    _classCallCheck(this, BuildInfoController);\n\n    /* global process */\n    this.version = \"0.35.1\";\n    this.build = \"114\" || 'SNAPSHOT';\n    this.hash = \"2bcc0e409ce06994baee520f0a514208ce604966\" || null || 'HEAD';\n};\n\nvar name = exports.name = 'c4LabBuildInfo';\nvar options = exports.options = {\n    template: _template2.default,\n    controller: BuildInfoController\n};\n\n/***/ }),\n\n/***/ 626:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<span class=\\\"text-muted small\\\" title=\\\"{{$ctrl.hash}}\\\">\\n  v{{$ctrl.version}}+{{$ctrl.build}}\\n</span>\\n\";\n\n/***/ }),\n\n/***/ 627:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _actions = __webpack_require__(28);\n\nfunction configureRoutes($stateProvider, $urlRouterProvider) {\n  'ngInject';\n\n  $urlRouterProvider.otherwise('/');\n  $stateProvider.state('home', {\n    url: '/?zoom',\n    component: 'c4LabApp',\n    resolve: {\n      zoom: function zoom($stateParams) {\n        return $stateParams.zoom;\n      }\n    },\n    onEnter: function onEnter(zoom, $ngRedux) {\n      var currentZoom = $ngRedux.getState().zoomNodeId;\n      if (currentZoom !== zoom) {\n        $ngRedux.dispatch((0, _actions.zoomChanged)({ zoomNodeId: zoom }));\n      }\n    }\n  }).state('load', {\n    url: '/load/{data}?zoom',\n    component: 'c4LabPreview',\n    resolve: {\n      encodedText: function encodedText($stateParams) {\n        return $stateParams.data;\n      },\n      zoom: function zoom($stateParams) {\n        return $stateParams.zoom;\n      }\n    },\n    onEnter: function onEnter(zoom, $ngRedux) {\n      // TODO: dedupe with other endpoint\n      var currentZoom = $ngRedux.getState().zoomNodeId;\n      if (currentZoom !== zoom) {\n        $ngRedux.dispatch((0, _actions.zoomChanged)({ zoomNodeId: zoom }));\n      }\n    }\n\n  }).state('help', {\n    url: '/help',\n    component: 'c4LabHelp'\n  });\n}\n\nexports.default = configureRoutes;\n\n/***/ }),\n\n/***/ 628:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _angular = __webpack_require__(43);\n\nvar angular = _interopRequireWildcard(_angular);\n\nvar _preview = __webpack_require__(629);\n\nvar previewComponent = _interopRequireWildcard(_preview);\n\nvar _header = __webpack_require__(280);\n\nvar _header2 = _interopRequireDefault(_header);\n\nvar _viewer = __webpack_require__(286);\n\nvar _viewer2 = _interopRequireDefault(_viewer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nexports.default = angular.module('c4-lab.preview', [_header2.default, _viewer2.default]).component(previewComponent.name, previewComponent.options).name;\n\n/***/ }),\n\n/***/ 629:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _preview = __webpack_require__(630);\n\nvar _preview2 = _interopRequireDefault(_preview);\n\nvar _actions = __webpack_require__(28);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PreviewComponent = function () {\n    function PreviewComponent($ngRedux) {\n        _classCallCheck(this, PreviewComponent);\n\n        this.unsubscribe = $ngRedux.connect(null, { preview: _actions.preview, previewEdit: _actions.previewEdit })(this);\n    }\n\n    _createClass(PreviewComponent, [{\n        key: '$onDestroy',\n        value: function $onDestroy() {\n            this.unsubscribe();\n        }\n    }, {\n        key: '$onChanges',\n        value: function $onChanges() {\n            this.preview({\n                encodedSource: this.encodedText\n            });\n        }\n    }]);\n\n    return PreviewComponent;\n}();\n\nvar name = exports.name = 'c4LabPreview';\nvar options = exports.options = {\n    template: _preview2.default,\n    controller: PreviewComponent,\n    bindings: {\n        encodedText: '<'\n    }\n};\n\n/***/ }),\n\n/***/ 630:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<c4-lab-nav></c4-lab-nav>\\n<c4-lab-viewer>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary hidden-xs hidden-sm\\\" ng-click=\\\"$ctrl.previewEdit()\\\">Start editing this\\n        graph</button>\\n</c4-lab-viewer>\";\n\n/***/ }),\n\n/***/ 631:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.options = exports.name = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _viewer = __webpack_require__(632);\n\nvar _viewer2 = _interopRequireDefault(_viewer);\n\nvar _actions = __webpack_require__(28);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ViewerComponent = function () {\n    function ViewerComponent($log, $sce, $ngRedux) {\n        'ngInject';\n\n        _classCallCheck(this, ViewerComponent);\n\n        this.$log = $log;\n        this.$sce = $sce;\n\n        this.unsubscribe = $ngRedux.connect(this.mapStateToThis.bind(this), { zoomChanged: _actions.zoomChanged })(this);\n    }\n\n    _createClass(ViewerComponent, [{\n        key: '$onDestroy',\n        value: function $onDestroy() {\n            this.unsubscribe();\n        }\n    }, {\n        key: 'mapStateToThis',\n        value: function mapStateToThis(state) {\n            return {\n                expandableNodes: state.zoomableNodes,\n                graph: state.graph,\n                zoom: state.zoomNodeId,\n                dot: state.dot,\n                svg: this.$sce.trustAsHtml(state.svg)\n            };\n        }\n    }, {\n        key: 'onZoom',\n        value: function onZoom() {\n            this.zoomChanged({ zoomNodeId: this.zoom });\n        }\n    }]);\n\n    return ViewerComponent;\n}();\n\nvar name = exports.name = 'c4LabViewer';\nvar options = exports.options = {\n    transclude: true,\n    template: _viewer2.default,\n    controller: ViewerComponent\n};\n\n/***/ }),\n\n/***/ 632:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div>\\n    <form class=\\\"form-inline\\\">\\n        <div class=\\\"form-group\\\">\\n            <label for=\\\"zoomableNodes\\\">Zoom to node</label>\\n            <select name=\\\"zoomableNodes\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.zoom\\\" ng-change=\\\"$ctrl.onZoom()\\\">\\n                <option ng-value=\\\"undefined\\\">--none--</option>\\n                <option ng-repeat=\\\"node in $ctrl.expandableNodes track by node.id\\\"\\n                    value=\\\"{{node.id}}\\\">{{node.path}}</option>\\n            </select>\\n        </div>\\n        <div class=\\\"form-group\\\" ng-transclude>\\n        </div>\\n    </form>\\n    <uib-tabset>\\n        <uib-tab heading=\\\"svg\\\">\\n            <div ng-bind-html=\\\"$ctrl.svg\\\"></div>\\n        </uib-tab>\\n        <uib-tab heading=\\\"dot\\\">\\n            <p>This is for debugging purposes</p>\\n            <!-- TODO: a disabled text area -->\\n            <pre>{{$ctrl.dot}}</pre>\\n        </uib-tab>\\n    </uib-tabset>\\n    <div>\";\n\n/***/ }),\n\n/***/ 633:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _angular = __webpack_require__(43);\n\nvar angular = _interopRequireWildcard(_angular);\n\nvar _help = __webpack_require__(634);\n\nvar _help2 = _interopRequireDefault(_help);\n\nvar _help3 = __webpack_require__(635);\n\nvar _help4 = _interopRequireDefault(_help3);\n\n__webpack_require__(636);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar HelpController = function HelpController() {\n    _classCallCheck(this, HelpController);\n\n    this.content = _help4.default;\n};\n\nexports.default = angular.module('c4-lab.help', ['hc.marked']).component('c4LabHelp', {\n    template: _help2.default,\n    controller: HelpController\n}).name;\n\n/***/ }),\n\n/***/ 634:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<c4-lab-nav></c4-lab-nav>\\n<div marked=\\\"$ctrl.content\\\"></div>\";\n\n/***/ }),\n\n/***/ 635:\n/***/ (function(module, exports) {\n\nmodule.exports = \"# C4-Lab Help\\n\\nC4-Lab defines a domain specific language (DSL) for creating software\\narchitectures, modeled heavily after [Simon Brown][SB]'s [C4][] approach\\n(Context, Containers, Components, and Classes). See [Visualising Software\\nArchitecture][] for more information.\\n\\n[SB]: http://www.simonbrown.je/\\n[C4]: http://www.codingthearchitecture.com/2014/08/24/c4_model_poster.html\\n[Visualising Software Architecture]: https://leanpub.com/visualising-software-architecture\\n\\n## Features\\n\\nC4-Lab has import, export, and \\\"share\\\" features accessible in the top\\nnavigation, and saves work-in-progress in your browser.  If you want to save a\\ngraph for later editing, export the `sexp` format, or save the \\\"share\\\" link.\\nOther exports do not allow resuming editing.\\n\\n## Syntax\\n\\nThe DSL uses [s-expression][]s to represent the hierarchy and connections\\nbetween actors, systems, containers, and components. If you squint your eyes, it\\nlooks like common lisp or scheme macros.\\n\\nWe use the excellent [CodeMirror][] in-browser editor to add syntax highlighting\\nand some help with managing the parentheses.\\n\\n[CodeMirror]: https://codemirror.net/\\n[s-expression]: https://en.wikipedia.org/wiki/S-expression\\n\\n### Full example\\n\\nHere's a small bit of software archicture for a web application, demonstrating\\nsome of the syntax.\\n\\n    (define-actor (\\\"customer\\\")\\n      (edge :to \\\"dog rater\\\" :description \\\"views/votes/uploads dog pictures\\\"))\\n\\n    (define-system (\\\"dog rater\\\" :desc \\\"fun clickbait website\\\")\\n\\n      (def-container (\\\"frontend\\\" :tech \\\"typescript, reactjs\\\")\\n        (edge :to \\\"./database\\\" :desc \\\"display sweet dog pictures\\\" \\n              :direction \\\"both\\\")\\n        )\\n\\n      (def-container (\\\"backend\\\" :tech \\\"golang\\\")\\n        (def-component (\\\"ad provider\\\")\\n          (edge :to \\\"third party ad network\\\" :desc \\\"fetch user-specific ads\\\")\\n          )\\n        )\\n\\n      (def-container (\\\"database\\\" :tech \\\"amazon S3\\\"))\\n    )\\n\\n    (def-system (\\\"third party ad network\\\" :desc \\\"advert network\\\"))\\n\\n### Actors\\n\\nTop level element, represents a human using the software.\\n\\nExamples:\\n\\n    (define-actor (\\\"customer\\\")\\n      ;; optional edges to other parts of the architecture\\n      )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-actor ((name) &body children))\\n\\n### Systems\\n\\nTop level element, represents a logical software system.\\n\\nExamples:\\n\\n    (define-system (\\\"name of the system\\\" :description \\\"optional description\\\" \\n                                         :tech \\\"optional technology\\\")\\n      ;; optional children of this system; edges or containers\\n      )\\n    (def-system (\\\"name of the system\\\" :desc \\\"can abbreviate a little; :desc vs :description, def-system vs define-system\\\"))\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-system ((name) &key description tech &body children))\\n\\n### Containers\\n\\nContainers are independently deployable pieces of a system. They should be used as children of a `def-system`\\n\\nExamples:\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\" :tech \\\"...\\\" :desc \\\"...\\\")\\n        ;; optional children of this system; edges or components\\n      )\\n    )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-container ((name) &key description tech &body children))\\n\\n### Components\\n\\nComponents are pieces of one deployable part of a system. These could be things\\nlike java packages, C# assemblies, ES6 modules, etc. They should be used as\\nchildren of a `def-container`\\n\\nExamples:\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\")\\n        (def-component (\\\"upload page\\\" :tech \\\"...\\\" :desc \\\"...\\\"))\\n        (def-component (\\\"dog browser\\\")\\n          ;; optional children, edges\\n        )\\n      )\\n    )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-component ((name) &key description tech &body children))\\n\\n### Edges\\n\\nEdges represent connections between the different elements in a software\\narchitecture. These have a few different options for how to connect things.\\nConnections are specified using something like a file path to unambiguously\\nidentify the destination of an edge.\\n\\nThey can be used as children of `def-actor`, `def-system`, `def-container`, and\\n`def-component`.\\n\\nYou can customize the direction of the edge using the `:direction` (`:dir` for\\nshort) option. The valid options are:\\n\\n* `push` - (default), indicates this node is reaching out to the target. Draws\\n  an arrow from the current node to the target.\\n* `pull` - indicates this node is pulling from the target, e.g. as a subscriber.\\n  Draws an arrow from the target to the current node.\\n* `both` - indicates bidrectional flow of actions/information. Draws an arrow to\\n  and from the target to the current node.\\n\\nExamples:\\n\\n    (def-actor (\\\"customer\\\")\\n      ;; connect this actor to the dog ratr system, and describe\\n      ;; how the actor uses the system\\n      (edge :to \\\"dog ratr\\\" :desc \\\"clicks a lot of links and ads\\\"))\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\")\\n        ;; connect the frontend to the backend, with a relative path\\n        (edge :to \\\"./backend\\\" :desc \\\"fetch list of dogs\\\" :dir \\\"both\\\")\\n        ;; can specify a \\\"full\\\" path to connect with nodes that aren't\\n        ;; on the top level\\n        (edge :to \\\"ad server/click tracker\\\" :desc \\\"records a click via HTTP\\\")\\n      )\\n      (def-container (\\\"backend\\\"))\\n    )\\n\\n    (def-system (\\\"ad server\\\")\\n      (def-container (\\\"click tracker\\\")))\\n\\nIf this were a real lisp function, it's definition would look like:\\n\\n    (defun edge (&key to description (direction \\\"both\\\")))\\n\\n### Comments\\n\\nComments are of questionable use since they don't show up in the diagrams at\\nall, but they are useful for commenting out code while you're still hasing out\\nthe architecture.\\n\\nAny content after two colons is ignored as a comment.\\n\\nExamples:\\n\\n    ;; this whole line is a comment\\n    (def-system (\\\"dog ratr\\\")) ;; this bit is ignored, too\\n\"\n\n/***/ }),\n\n/***/ 639:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _angular = __webpack_require__(43);\n\nvar angular = _interopRequireWildcard(_angular);\n\n__webpack_require__(640);\n\nvar _reduxSaga = __webpack_require__(709);\n\nvar _reduxSaga2 = _interopRequireDefault(_reduxSaga);\n\nvar _reducers = __webpack_require__(715);\n\nvar _reducers2 = _interopRequireDefault(_reducers);\n\nvar _sagas = __webpack_require__(718);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar timingMiddleware = function timingMiddleware(store) {\n    return function (next) {\n        return function (action) {\n            // tslint:disable:no-console\n            var label = 'Processing ' + action.type;\n            console.time(label);\n            console.group(label);\n            try {\n                return next(action);\n            } finally {\n                console.timeEnd(label);\n                console.groupEnd();\n            }\n            // tslint:enable:no-console\n        };\n    };\n};\n// tslint:disable-next-line:ban-types\nvar enhancers = [];\nvar reduxDevtool = window.__REDUX_DEVTOOLS_EXTENSION__;\nif (reduxDevtool) {\n    enhancers.push(reduxDevtool());\n}\nvar sagas = (0, _reduxSaga2.default)();\nexports.default = angular.module('c4-lab.store', ['ngRedux']).config(function ($ngReduxProvider) {\n    $ngReduxProvider.createStoreWith(_reducers2.default, [timingMiddleware, sagas], enhancers);\n}).run(function ($ngRedux) {\n    sagas.run(_sagas.rootSaga);\n}).name;\n\n/***/ }),\n\n/***/ 715:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.initialState = undefined;\n\nvar _redux = __webpack_require__(298);\n\nvar _typescriptFsaReducers = __webpack_require__(716);\n\nvar _actions = __webpack_require__(28);\n\nvar _c4lab = __webpack_require__(717);\n\nvar _c4lab2 = _interopRequireDefault(_c4lab);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar initialState = exports.initialState = {\n    graph: null,\n    isPreview: false,\n    parseError: null,\n    source: _c4lab2.default,\n    zoomNodeId: null,\n    zoomableNodes: []\n};\nvar sourceReducer = (0, _typescriptFsaReducers.reducerWithInitialState)(_c4lab2.default).case(_actions.sourceChanged, function (old, evt) {\n    return evt.source;\n}).build();\n// TODO: not need this; there's gotta be some config to teach jest's\n// typescript preprocessor to respect the additional types\nvar testSafeSourceReducer = function testSafeSourceReducer(src, evt) {\n    return sourceReducer(src, evt) || '';\n};\nvar parseErrorReducer = (0, _typescriptFsaReducers.reducerWithInitialState)(null).case(_actions.sourceParseError, function (old, evt) {\n    return evt.error;\n}).case(_actions.sourceParsed, function (old, evt) {\n    return null;\n}).build();\nvar graphReducer = (0, _typescriptFsaReducers.reducerWithInitialState)(null).case(_actions.sourceParsed, function (old, evt) {\n    return evt.graph;\n}).build();\nvar zoomableNodesReducer = (0, _typescriptFsaReducers.reducerWithInitialState)([]).case(_actions.sourceParsed, function (old, evt) {\n    return evt.graph.items.filter(function (x) {\n        return x.canExpand;\n    }).sort(function (a, b) {\n        return a.path.localeCompare(b.path);\n    });\n}).build();\nvar zoomNodeIdReducer = (0, _typescriptFsaReducers.reducerWithInitialState)(null).case(_actions.zoomChanged, function (old, evt) {\n    return evt.zoomNodeId || null;\n}).build();\nvar dotReducer = (0, _typescriptFsaReducers.reducerWithInitialState)(null).case(_actions.dotChanged, function (old, evt) {\n    return evt.dot;\n}).build();\nvar svgReducer = (0, _typescriptFsaReducers.reducerWithInitialState)(null).case(_actions.svgChanged, function (old, evt) {\n    return evt.svg;\n}).build();\nvar stateReducer = (0, _typescriptFsaReducers.reducerWithInitialState)(null).case(_actions.angularInitialized, function (old, evt) {\n    return evt.$state;\n}).build();\nvar windowReducer = (0, _typescriptFsaReducers.reducerWithInitialState)(null).case(_actions.angularInitialized, function (old, evt) {\n    return evt.$window;\n}).build();\nvar userReducer = (0, _typescriptFsaReducers.reducerWithInitialState)(null).case(_actions.githubLoginComplete, function (old, evt) {\n    return evt;\n}).case(_actions.githubLogout, function (old, evt) {\n    return null;\n}).build();\nvar isPreviewReducer = (0, _typescriptFsaReducers.reducerWithInitialState)(false).case(_actions.preview, function (old, evt) {\n    return true;\n}).case(_actions.previewEdit, function (old, evt) {\n    return false;\n}).build();\nvar rootReducer = (0, _redux.combineReducers)({\n    $state: stateReducer,\n    $window: windowReducer,\n    dot: dotReducer,\n    graph: graphReducer,\n    isPreview: isPreviewReducer,\n    parseError: parseErrorReducer,\n    source: testSafeSourceReducer,\n    svg: svgReducer,\n    user: userReducer,\n    zoomNodeId: zoomNodeIdReducer,\n    zoomableNodes: zoomableNodesReducer\n});\nexports.default = rootReducer;\n\n/***/ }),\n\n/***/ 717:\n/***/ (function(module, exports) {\n\nmodule.exports = \"(title \\\"c4-lab\\\")\\n;; add an actor to represent humans that use your system\\n(define-actor (\\\"Devs\\\")\\n  ;; add edges to say what part of your system the actor uses\\n  (edge\\n   ;; specify where the other end of this edge is using something like a path\\n   ;; \\\"C4 Lab/UI\\\" points at the \\\"C4 Lab\\\" system, the the \\\"UI\\\" container inside\\n   :to \\\"C4 Lab/UI\\\"\\n   :description \\\"Create/read/update designs\\\")\\n  )\\n;; add your system\\n(define-system (\\\"C4 Lab\\\"\\n                :description \\\"Web-based rapid prototyping of C4 diagrams to augment whiteboards\\\")\\n  ;; add the containers inside your system\\n  (def-container (\\\"UI\\\" :tech \\\"html5, angularjs\\\"\\n                       :description \\\"prototype, import, export C4 diagrams\\\" ))\\n  )\\n(define-system (\\\"Github\\\" :description \\\"Free git and web hosting\\\")\\n  ;; add edges between any actor, system, or container\\n  (edge :description \\\"hosts\\\" :to \\\"C4 Lab/UI\\\")\\n  (edge :to \\\"Travis-ci\\\" :description \\\"triggers build\\\")\\n  )\\n(define-system (\\\"Travis-ci\\\" :description \\\"Open source CI\\\")\\n  (edge :to \\\"Github\\\" :description \\\"publishes\\\"))\\n;; any line that starts with \\\";;\\\" is a comment\\n\"\n\n/***/ }),\n\n/***/ 718:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.rootSaga = rootSaga;\n\nvar _effects = __webpack_require__(100);\n\nvar _core = __webpack_require__(126);\n\nvar _actions = __webpack_require__(28);\n\nvar _export = __webpack_require__(719);\n\nvar _export2 = _interopRequireDefault(_export);\n\nvar _github = __webpack_require__(720);\n\nvar _github2 = _interopRequireDefault(_github);\n\nvar _preview = __webpack_require__(873);\n\nvar _preview2 = _interopRequireDefault(_preview);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _marked = /*#__PURE__*/regeneratorRuntime.mark(onSourceChanged),\n    _marked2 = /*#__PURE__*/regeneratorRuntime.mark(render),\n    _marked3 = /*#__PURE__*/regeneratorRuntime.mark(updateZoom),\n    _marked4 = /*#__PURE__*/regeneratorRuntime.mark(latestSource),\n    _marked5 = /*#__PURE__*/regeneratorRuntime.mark(latestGraph),\n    _marked6 = /*#__PURE__*/regeneratorRuntime.mark(latestZoom),\n    _marked7 = /*#__PURE__*/regeneratorRuntime.mark(init),\n    _marked8 = /*#__PURE__*/regeneratorRuntime.mark(rootSaga);\n\nfunction onSourceChanged(action) {\n    var graph;\n    return regeneratorRuntime.wrap(function onSourceChanged$(_context) {\n        while (1) {\n            switch (_context.prev = _context.next) {\n                case 0:\n                    _context.prev = 0;\n                    graph = (0, _core.parse)(action.payload.source);\n                    _context.next = 4;\n                    return (0, _effects.put)((0, _actions.sourceParsed)({ graph: graph }));\n\n                case 4:\n                    _context.next = 10;\n                    break;\n\n                case 6:\n                    _context.prev = 6;\n                    _context.t0 = _context['catch'](0);\n                    _context.next = 10;\n                    return (0, _effects.put)((0, _actions.sourceParseError)({ error: _context.t0.message }));\n\n                case 10:\n                case 'end':\n                    return _context.stop();\n            }\n        }\n    }, _marked, this, [[0, 6]]);\n}\nfunction hrefTo($state, zoom) {\n    var name = $state.current.name;\n    if (name === undefined) {\n        return '';\n    }\n    var params = Object.assign({}, $state.params, { zoom: zoom });\n    return $state.href(name, params);\n}\nfunction render() {\n    var _ref, zoomNodeId, graph, $state, $window, source, isPreview, dot, svg;\n\n    return regeneratorRuntime.wrap(function render$(_context2) {\n        while (1) {\n            switch (_context2.prev = _context2.next) {\n                case 0:\n                    _context2.next = 2;\n                    return (0, _effects.select)();\n\n                case 2:\n                    _ref = _context2.sent;\n                    zoomNodeId = _ref.zoomNodeId;\n                    graph = _ref.graph;\n                    $state = _ref.$state;\n                    $window = _ref.$window;\n                    source = _ref.source;\n                    isPreview = _ref.isPreview;\n\n                    if (graph) {\n                        _context2.next = 11;\n                        break;\n                    }\n\n                    return _context2.abrupt('return');\n\n                case 11:\n                    if (!isPreview) {\n                        new _core.DataStore($window.localStorage).save(source);\n                    }\n                    // TODO: resolve race condition where we call this method before $state.current exists\n                    // so we can drop this wait\n\n                case 12:\n                    if ($state.current && $state.current.name) {\n                        _context2.next = 17;\n                        break;\n                    }\n\n                    _context2.next = 15;\n                    return (0, _effects.call)(wait);\n\n                case 15:\n                    _context2.next = 12;\n                    break;\n\n                case 17:\n                    dot = (0, _core.toDot)(graph, zoomNodeId, function (x) {\n                        return hrefTo($state, x);\n                    });\n                    _context2.next = 20;\n                    return (0, _effects.put)((0, _actions.dotChanged)({ dot: dot }));\n\n                case 20:\n                    svg = (0, _core.toSvg)(dot);\n                    _context2.next = 23;\n                    return (0, _effects.put)((0, _actions.svgChanged)({ svg: svg }));\n\n                case 23:\n                case 'end':\n                    return _context2.stop();\n            }\n        }\n    }, _marked2, this);\n}\nfunction wait() {\n    var ms = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 50;\n\n    return new Promise(function (resolve) {\n        return setTimeout(resolve, ms);\n    });\n}\nfunction updateZoom(action) {\n    var _ref2, $state, zoom, name, params;\n\n    return regeneratorRuntime.wrap(function updateZoom$(_context3) {\n        while (1) {\n            switch (_context3.prev = _context3.next) {\n                case 0:\n                    _context3.next = 2;\n                    return (0, _effects.select)();\n\n                case 2:\n                    _ref2 = _context3.sent;\n                    $state = _ref2.$state;\n                    zoom = action.payload.zoomNodeId;\n\n                    if (!(zoom === $state.params.zoom)) {\n                        _context3.next = 7;\n                        break;\n                    }\n\n                    return _context3.abrupt('return');\n\n                case 7:\n                    _context3.next = 9;\n                    return (0, _effects.call)(render);\n\n                case 9:\n                    name = $state.current.name;\n\n                    if (name) {\n                        params = Object.assign({}, $state.params, { zoom: zoom });\n\n                        $state.go(name, params, { notify: false });\n                    }\n\n                case 11:\n                case 'end':\n                    return _context3.stop();\n            }\n        }\n    }, _marked3, this);\n}\nfunction latestSource() {\n    return regeneratorRuntime.wrap(function latestSource$(_context4) {\n        while (1) {\n            switch (_context4.prev = _context4.next) {\n                case 0:\n                    _context4.next = 2;\n                    return (0, _effects.takeLatest)(_actions.sourceChanged, onSourceChanged);\n\n                case 2:\n                case 'end':\n                    return _context4.stop();\n            }\n        }\n    }, _marked4, this);\n}\nfunction latestGraph() {\n    return regeneratorRuntime.wrap(function latestGraph$(_context5) {\n        while (1) {\n            switch (_context5.prev = _context5.next) {\n                case 0:\n                    _context5.next = 2;\n                    return (0, _effects.takeLatest)(_actions.sourceParsed, render);\n\n                case 2:\n                case 'end':\n                    return _context5.stop();\n            }\n        }\n    }, _marked5, this);\n}\nfunction latestZoom() {\n    return regeneratorRuntime.wrap(function latestZoom$(_context6) {\n        while (1) {\n            switch (_context6.prev = _context6.next) {\n                case 0:\n                    _context6.next = 2;\n                    return (0, _effects.throttle)(100, _actions.zoomChanged, updateZoom);\n\n                case 2:\n                case 'end':\n                    return _context6.stop();\n            }\n        }\n    }, _marked6, this);\n}\nfunction init() {\n    var storage, source;\n    return regeneratorRuntime.wrap(function init$(_context7) {\n        while (1) {\n            switch (_context7.prev = _context7.next) {\n                case 0:\n                    _context7.next = 2;\n                    return (0, _effects.take)(_actions.angularInitialized.type);\n\n                case 2:\n                    if (window.localStorage) {\n                        _context7.next = 4;\n                        break;\n                    }\n\n                    return _context7.abrupt('return');\n\n                case 4:\n                    if (!/load/i.test(window.location.hash)) {\n                        _context7.next = 6;\n                        break;\n                    }\n\n                    return _context7.abrupt('return');\n\n                case 6:\n                    storage = new _core.DataStore(window.localStorage);\n                    source = storage.load();\n\n                    if (!source) {\n                        _context7.next = 11;\n                        break;\n                    }\n\n                    _context7.next = 11;\n                    return (0, _effects.put)((0, _actions.sourceChanged)({ source: source }));\n\n                case 11:\n                case 'end':\n                    return _context7.stop();\n            }\n        }\n    }, _marked7, this);\n}\nfunction rootSaga() {\n    return regeneratorRuntime.wrap(function rootSaga$(_context8) {\n        while (1) {\n            switch (_context8.prev = _context8.next) {\n                case 0:\n                    _context8.next = 2;\n                    return (0, _effects.all)([(0, _effects.call)(latestSource), (0, _effects.call)(latestGraph), (0, _effects.call)(latestZoom), (0, _effects.call)(init), (0, _effects.call)(_github2.default), (0, _effects.call)(_preview2.default), (0, _effects.call)(_export2.default)]);\n\n                case 2:\n                case 'end':\n                    return _context8.stop();\n            }\n        }\n    }, _marked8, this);\n}\n\n/***/ }),\n\n/***/ 719:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = exportSaga;\n\nvar _effects = __webpack_require__(100);\n\nvar _core = __webpack_require__(126);\n\nvar _actions = __webpack_require__(28);\n\nvar _marked = /*#__PURE__*/regeneratorRuntime.mark(onExport),\n    _marked2 = /*#__PURE__*/regeneratorRuntime.mark(exportSaga);\n\nfunction onExport(action) {\n    var _ref, $state, source, title, zoomNodeId, dot, format, href, exporter;\n\n    return regeneratorRuntime.wrap(function onExport$(_context) {\n        while (1) {\n            switch (_context.prev = _context.next) {\n                case 0:\n                    _context.next = 2;\n                    return (0, _effects.select)();\n\n                case 2:\n                    _ref = _context.sent;\n                    $state = _ref.$state;\n                    source = _ref.source;\n                    title = _ref.graph.title;\n                    zoomNodeId = _ref.zoomNodeId;\n                    dot = _ref.dot;\n                    format = action.payload.format;\n\n                    if (!(format === 'gist')) {\n                        _context.next = 15;\n                        break;\n                    }\n\n                    href = $state.href('load', {\n                        data: (0, _core.uriEncode)(source),\n                        zoom: zoomNodeId\n                    });\n                    _context.next = 13;\n                    return (0, _effects.put)(_actions.gistExport.started({ href: href }));\n\n                case 13:\n                    _context.next = 17;\n                    break;\n\n                case 15:\n                    exporter = new _core.Exporter(window.document);\n\n                    exporter.export(format, title, source, dot);\n\n                case 17:\n                case 'end':\n                    return _context.stop();\n            }\n        }\n    }, _marked, this);\n}\nfunction exportSaga() {\n    return regeneratorRuntime.wrap(function exportSaga$(_context2) {\n        while (1) {\n            switch (_context2.prev = _context2.next) {\n                case 0:\n                    _context2.next = 2;\n                    return (0, _effects.takeLatest)(_actions.exported, onExport);\n\n                case 2:\n                case 'end':\n                    return _context2.stop();\n            }\n        }\n    }, _marked2, this);\n}\n\n/***/ }),\n\n/***/ 720:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = githubSaga;\n\nvar _rest = __webpack_require__(721);\n\nvar Octokit = _interopRequireWildcard(_rest);\n\nvar _effects = __webpack_require__(100);\n\nvar _gist = __webpack_require__(872);\n\nvar _actions = __webpack_require__(28);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar _marked = /*#__PURE__*/regeneratorRuntime.mark(onGithubLogin),\n    _marked2 = /*#__PURE__*/regeneratorRuntime.mark(exportToGist),\n    _marked3 = /*#__PURE__*/regeneratorRuntime.mark(handleLogin),\n    _marked4 = /*#__PURE__*/regeneratorRuntime.mark(handleExport),\n    _marked5 = /*#__PURE__*/regeneratorRuntime.mark(githubSaga);\n\n/* OMG something is wrong with my typescript + webpack */\nfunction createOctokit() {\n    try {\n        return new Octokit();\n    } catch (e) {/* next */}\n    try {\n        var untyped = Octokit;\n        var factory = untyped;\n        return factory.default();\n    } catch (e) {/* next */}\n    throw new Error('I dunno, man');\n}\nvar octokit = createOctokit();\nfunction onGithubLogin(action) {\n    var user;\n    return regeneratorRuntime.wrap(function onGithubLogin$(_context) {\n        while (1) {\n            switch (_context.prev = _context.next) {\n                case 0:\n                    octokit.authenticate({\n                        token: action.payload.token,\n                        type: 'oauth'\n                    });\n                    _context.next = 3;\n                    return (0, _effects.call)(function () {\n                        return octokit.users.get({});\n                    });\n\n                case 3:\n                    user = _context.sent;\n                    _context.next = 6;\n                    return (0, _effects.put)((0, _actions.githubLoginComplete)(Object.assign({}, action.payload, { avatarUrl: user.data.avatar_url, login: user.data.login })));\n\n                case 6:\n                case 'end':\n                    return _context.stop();\n            }\n        }\n    }, _marked, this);\n}\nfunction exportToGist(action) {\n    var _window$location, origin, pathname, url, exporter, _ref, source, title, result;\n\n    return regeneratorRuntime.wrap(function exportToGist$(_context2) {\n        while (1) {\n            switch (_context2.prev = _context2.next) {\n                case 0:\n                    _window$location = window.location, origin = _window$location.origin, pathname = _window$location.pathname;\n                    url = new URL('' + origin + pathname + action.payload.href);\n                    exporter = new _gist.GistExporter(octokit);\n                    _context2.next = 5;\n                    return (0, _effects.select)();\n\n                case 5:\n                    _ref = _context2.sent;\n                    source = _ref.source;\n                    title = _ref.graph.title;\n                    _context2.next = 10;\n                    return (0, _effects.call)(function () {\n                        return exporter.export(title, source, url);\n                    });\n\n                case 10:\n                    result = _context2.sent;\n                    _context2.next = 13;\n                    return (0, _effects.put)(_actions.gistExport.done(result));\n\n                case 13:\n                    // TODO: move this side-effect elsewhere\n                    window.open(result.url, '_blank');\n\n                case 14:\n                case 'end':\n                    return _context2.stop();\n            }\n        }\n    }, _marked2, this);\n}\nfunction handleLogin() {\n    return regeneratorRuntime.wrap(function handleLogin$(_context3) {\n        while (1) {\n            switch (_context3.prev = _context3.next) {\n                case 0:\n                    _context3.next = 2;\n                    return (0, _effects.takeLatest)(_actions.githubLoggedIn, onGithubLogin);\n\n                case 2:\n                case 'end':\n                    return _context3.stop();\n            }\n        }\n    }, _marked3, this);\n}\nfunction handleExport() {\n    return regeneratorRuntime.wrap(function handleExport$(_context4) {\n        while (1) {\n            switch (_context4.prev = _context4.next) {\n                case 0:\n                    _context4.next = 2;\n                    return (0, _effects.takeLatest)(_actions.gistExport.started, exportToGist);\n\n                case 2:\n                case 'end':\n                    return _context4.stop();\n            }\n        }\n    }, _marked4, this);\n}\nfunction githubSaga() {\n    return regeneratorRuntime.wrap(function githubSaga$(_context5) {\n        while (1) {\n            switch (_context5.prev = _context5.next) {\n                case 0:\n                    _context5.next = 2;\n                    return (0, _effects.all)([(0, _effects.call)(handleLogin), (0, _effects.call)(handleExport)]);\n\n                case 2:\n                case 'end':\n                    return _context5.stop();\n            }\n        }\n    }, _marked5, this);\n}\n\n/***/ }),\n\n/***/ 785:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 872:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction createReadme(title, url) {\n    return '# C4 Diagrams for *' + title + '*\\n\\nThese files were exported from [C4-Lab](https://ryepup.github.io/c4-lab)\\n\\n[View or edit these diagrams](' + url + ')\\n';\n}\n\nvar GistExporter = exports.GistExporter = function () {\n    function GistExporter(gh) {\n        _classCallCheck(this, GistExporter);\n\n        this.gh = gh;\n    }\n\n    _createClass(GistExporter, [{\n        key: 'export',\n        value: function _export(title, sexp, url) {\n            // TODO: use async/await\n            return this.gh.gists.create({\n                description: 'C4 diagrams for \\'' + title + '\\'',\n                // octokit types are just wrong\n                files: this.createFiles(title, url, sexp),\n                public: false\n            }).then(function (resp) {\n                return {\n                    id: resp.data.id,\n                    url: new URL(resp.data.html_url)\n                };\n            });\n        }\n    }, {\n        key: 'createFiles',\n        value: function createFiles(title, url, sexp) {\n            return _defineProperty({\n                'README.md': {\n                    content: createReadme(title, url)\n                }\n            }, title + '.sexp', {\n                content: sexp\n            });\n        }\n    }]);\n\n    return GistExporter;\n}();\n\n/***/ }),\n\n/***/ 873:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = previewSaga;\n\nvar _effects = __webpack_require__(100);\n\nvar _core = __webpack_require__(126);\n\nvar _actions = __webpack_require__(28);\n\nvar _marked = /*#__PURE__*/regeneratorRuntime.mark(onPreviewEdit),\n    _marked2 = /*#__PURE__*/regeneratorRuntime.mark(onPreview),\n    _marked3 = /*#__PURE__*/regeneratorRuntime.mark(latestPreview),\n    _marked4 = /*#__PURE__*/regeneratorRuntime.mark(latestPreviewEdit),\n    _marked5 = /*#__PURE__*/regeneratorRuntime.mark(previewSaga);\n\nfunction onPreviewEdit(action) {\n    var _ref, source, $state;\n\n    return regeneratorRuntime.wrap(function onPreviewEdit$(_context) {\n        while (1) {\n            switch (_context.prev = _context.next) {\n                case 0:\n                    _context.next = 2;\n                    return (0, _effects.select)();\n\n                case 2:\n                    _ref = _context.sent;\n                    source = _ref.source;\n                    $state = _ref.$state;\n\n                    new _core.DataStore(window.localStorage).save(source);\n                    _context.next = 8;\n                    return (0, _effects.put)((0, _actions.sourceChanged)({ source: source }));\n\n                case 8:\n                    $state.go('home');\n\n                case 9:\n                case 'end':\n                    return _context.stop();\n            }\n        }\n    }, _marked, this);\n}\nfunction onPreview(action) {\n    var source;\n    return regeneratorRuntime.wrap(function onPreview$(_context2) {\n        while (1) {\n            switch (_context2.prev = _context2.next) {\n                case 0:\n                    source = (0, _core.uriDecode)(action.payload.encodedSource);\n                    _context2.next = 3;\n                    return (0, _effects.put)((0, _actions.sourceChanged)({ source: source }));\n\n                case 3:\n                case 'end':\n                    return _context2.stop();\n            }\n        }\n    }, _marked2, this);\n}\nfunction latestPreview() {\n    return regeneratorRuntime.wrap(function latestPreview$(_context3) {\n        while (1) {\n            switch (_context3.prev = _context3.next) {\n                case 0:\n                    _context3.next = 2;\n                    return (0, _effects.takeLatest)(_actions.preview, onPreview);\n\n                case 2:\n                case 'end':\n                    return _context3.stop();\n            }\n        }\n    }, _marked3, this);\n}\nfunction latestPreviewEdit() {\n    return regeneratorRuntime.wrap(function latestPreviewEdit$(_context4) {\n        while (1) {\n            switch (_context4.prev = _context4.next) {\n                case 0:\n                    _context4.next = 2;\n                    return (0, _effects.takeLatest)(_actions.previewEdit, onPreviewEdit);\n\n                case 2:\n                case 'end':\n                    return _context4.stop();\n            }\n        }\n    }, _marked4, this);\n}\nfunction previewSaga() {\n    return regeneratorRuntime.wrap(function previewSaga$(_context5) {\n        while (1) {\n            switch (_context5.prev = _context5.next) {\n                case 0:\n                    _context5.next = 2;\n                    return (0, _effects.all)([(0, _effects.call)(latestPreview), (0, _effects.call)(latestPreviewEdit)]);\n\n                case 2:\n                case 'end':\n                    return _context5.stop();\n            }\n        }\n    }, _marked5, this);\n}\n\n/***/ })\n\n},[349]);\n\n\n// WEBPACK FOOTER //\n// main.dbfc98b2669f1a151114.js","export { parse, SyntaxError, ParseError } from './parse/index'\nexport { uriEncode, uriDecode, toSvg } from './codegen'\nexport { DataStore } from './DataStore'\nexport { Exporter, formats } from './exporter'\nexport { toDot } from './dot-writer'\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/index.ts","import { StateService } from 'angular-ui-router'\nimport actionCreatorFactory from 'typescript-fsa'\nimport { IGraph, NodeId } from '../core/interfaces'\n\nexport interface IEditorParseEvent {\n    graph: IGraph\n}\n\nexport interface IEditorParseError {\n    error: string,\n    line?: number,\n    column?: number\n}\n\nexport interface ISourceChanged {\n    source: string\n}\n\nexport interface IZoomChanged {\n    zoomNodeId: NodeId | null\n}\n\nexport interface IDotChanged {\n    dot: string\n}\nexport interface ISvgChanged {\n    svg: string\n}\n\nexport interface IAngularInitialized {\n    $state: StateService,\n    $window: Window\n}\n\nexport interface IGithubLoggedIn {\n    token: string\n}\n\nexport interface IGithubLoginComplete extends IGithubLoggedIn {\n    login: string,\n    avatarUrl: string\n}\n\nexport interface IGistExportRequest {\n    href: string\n}\n\nexport interface IGistExportResult {\n    id: string\n    url: URL\n}\n\nexport interface IPreview {\n    encodedSource: string\n}\n\nexport interface IExportRequest {\n    format: string // TODO: use an enum\n}\n\nconst actionCreator = actionCreatorFactory()\n\nexport const sourceParsed = actionCreator<IEditorParseEvent>('C4_SOURCE_PARSED')\nexport const sourceParseError = actionCreator<IEditorParseError>('C4_SOURCE_PARSE_ERROR')\nexport const sourceChanged = actionCreator<ISourceChanged>('C4_SOURCE_CHANGED')\nexport const dotChanged = actionCreator<IDotChanged>('C4_DOT_CHANGED')\nexport const svgChanged = actionCreator<ISvgChanged>('C4_SVG_CHANGED')\nexport const angularInitialized = actionCreator<IAngularInitialized>('C4_ANGULAR_INITIALIZED')\nexport const zoomChanged = actionCreator<IZoomChanged>('C4_ZOOM_CHANGED')\nexport const githubLoggedIn = actionCreator<IGithubLoggedIn>('C4_GITHUB_LOGGED_IN')\nexport const githubLoginComplete = actionCreator<IGithubLoginComplete>('C4_GITHUB_LOGIN_COMPLETE')\nexport const githubLogout = actionCreator('C4_GITHUB_LOGOUT')\nexport const gistExport = actionCreator.async<IGistExportRequest, IGistExportResult>('C4_GIST_EXPORT')\nexport const preview = actionCreator<IPreview>('C4_PREVIEW')\nexport const previewEdit = actionCreator('C4_PREVIEW_EDIT')\nexport const exported = actionCreator<IExportRequest>('C4_EXPORT')\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/store/actions.ts","import angular from 'angular'\nimport * as nav from \"./nav.component\"\nimport * as about from \"./about.component\"\n\nexport default angular.module('c4-lab.header', [\n    'ui.bootstrap',\n    'ui.router'])\n    .component(nav.name, nav.options)\n    .component(about.name, about.options)\n    .name\n\n\n// WEBPACK FOOTER //\n// ./src/header/index.js","import ParseError from './ParseError'\n\nexport default class InvalidDirectionError extends ParseError {\n    constructor(dir: string) {\n        super(`Unknown edge direction \"${dir}\". valid options are \"push\", \"pull\", or \"both\"`)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/parse/InvalidDirectionError.ts","import ParseError from './ParseError'\n\nexport default class OptsNotFoundError extends ParseError {\n    constructor(type: string) { super(`missing options for a ${type}`) }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/parse/OptsNotFoundError.ts","import ParseError from './ParseError'\n\nexport default class NameNotFoundError extends ParseError {\n    constructor(type: string) { super(`missing a name for a ${type}`) }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/parse/NameNotFoundError.ts","import * as lz from 'lz-string'\nimport Viz from 'viz.js'\n\ntype elementCreator = (tagName: string) => HTMLElement\n\n/**\n * convert a graph from DOT text to SVG\n */\nexport const toSvg = (dot: string) => Viz(dot, { format: 'svg', engine: 'dot' }) as string\n\n/**\n * convert a text representation to an URI-encoded representation\n */\nexport const uriEncode = (text: string) => lz.compressToEncodedURIComponent(text)\n\n/**\n * convert an URI-encoded representation to a text representation\n */\nexport const uriDecode = (uriData: string) => lz.decompressFromEncodedURIComponent(uriData)\n\n/**\n * convert DOT text to a png-encoded data URI\n */\nexport const toPngDataUri = (dot: string, createElement: elementCreator) => {\n    const svg = toSvg(dot)\n    const img = createElement('img') as HTMLImageElement\n    return new Promise<string>((resolve) => {\n        img.onload = () => resolve(toDataUrl(img, createElement))\n        img.setAttribute('src', 'data:image/svg+xml,' + encodeURIComponent(svg))\n    })\n}\n\nfunction toDataUrl(img: HTMLImageElement, createElement: elementCreator) {\n    const canvas = createElement('canvas') as HTMLCanvasElement\n    canvas.width = img.width\n    canvas.height = img.height\n    const context = canvas.getContext('2d')\n    if (context) {\n        context.drawImage(img, 0, 0)\n        const dataUrl = canvas.toDataURL('image/png')\n        return dataUrl\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/codegen.ts","import template from './about.html'\n\nexport const name = \"c4LabAboutModal\"\nexport const options = {\n    template: template,\n    bindings: {\n        close: '&'\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/header/about.component.js","import * as angular from 'angular'\nimport 'angular-ui-bootstrap'\nimport 'angular-ui-router'\n\nimport * as viewer from './viewer.component'\n\nexport default angular.module('c4-lab.viewer', ['ui.bootstrap',\n  'ui.router'])\n    .component(viewer.name, viewer.options)\n    .name;\n\n\n// WEBPACK FOOTER //\n// ./src/viewer/index.js","import * as angular from 'angular'\nimport 'babel-polyfill'\nimport 'angular-ui-codemirror'\nimport 'angular-ui-bootstrap'\nimport 'angular-ui-router'\nimport 'angular-animate'\nimport 'ng-file-upload'\nimport 'angulartics'\nimport angularticsGa from 'angulartics-google-analytics'\n\nimport * as editor from './editor'\nimport header from './header'\nimport * as shell from './shell'\nimport * as buildInfo from './build-info'\nimport configureRoutes from './routes'\nimport preview from './preview'\nimport viewer from './viewer'\nimport help from './help'\nimport store from './store/store.module'\nimport { angularInitialized } from './store/actions'\n\nangular.module('c4-lab', [\n  'ui.codemirror',\n  'ui.bootstrap',\n  'ui.router',\n  'ngAnimate',\n  'ngFileUpload',\n  angularticsGa,\n  header,\n  preview,\n  viewer,\n  help, store])\n  .component(buildInfo.name, buildInfo.options)\n  .component(editor.name, editor.options)\n  .component(shell.name, shell.options)\n  .run(editor.install)\n  .config(allowBlobsAndDataHrefs)\n  .config(configureRoutes)\n  .run(($state, $ngRedux, $window) => {\n    $ngRedux.dispatch(angularInitialized({ $state, $window }))\n  })\n\n// @ngInject\nfunction allowBlobsAndDataHrefs($compileProvider) {\n  $compileProvider\n    .aHrefSanitizationWhitelist(/^(https?|ftp|mailto|blob|data):/i);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export * from \"./editor.component\"\n\n\n// WEBPACK FOOTER //\n// ./src/editor/index.js","import 'codemirror/mode/commonlisp/commonlisp'\nimport 'codemirror/addon/edit/matchbrackets'\nimport 'codemirror/addon/edit/closebrackets'\nimport '../../node_modules/codemirror/lib/codemirror.css'\nimport '../../node_modules/codemirror/theme/elegant.css'\nimport CodeMirror from 'codemirror'\nimport template from './editor.html'\nimport './editor.css'\nimport { sourceChanged } from '../store/actions'\n\nexport class EditorController {\n\n    constructor($log, $ngRedux) {\n        'ngInject'\n        this.log = $log\n        this.editorOptions = {\n            lineNumbers: true,\n            mode: \"commonlisp\",\n            theme: \"elegant\",\n            matchBrackets: true,\n            autoCloseBrackets: true\n        }\n\n        this.unsubscribe = $ngRedux\n            .connect(this.mapStateToThis, { sourceChanged })(this);\n    }\n\n    $onDestroy() {\n        this.unsubscribe();\n    }\n\n    mapStateToThis(state) {\n        return {\n            text: state.source,\n            parseError: state.parseError,\n            syntaxIsValid: state.parseError ? false : true\n        }\n    }\n\n    parse(text) {\n        this.sourceChanged({ source: text })\n    }\n}\n\nexport const name = \"c4LabEditor\"\nexport const options = {\n    template: template,\n    controller: EditorController\n}\n\n// @ngInject\nexport function install($window, $log) {\n    $log.debug('installing codemirror')\n    $window.CodeMirror = CodeMirror;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/editor/editor.component.js","module.exports = \"<div ng-class=\\\"{'bg-success': $ctrl.syntaxIsValid, 'bg-danger': !$ctrl.syntaxIsValid}\\\" style=\\\"padding: 0 1em;\\\">\\n    <ui-codemirror ui-codemirror-opts=\\\"$ctrl.editorOptions\\\" ng-model=\\\"$ctrl.text\\\" ng-model-options=\\\"{ debounce: 250 }\\\"\\n        ng-change=\\\"$ctrl.parse($ctrl.text)\\\">\\n    </ui-codemirror>\\n    <span class=\\\"help-block\\\">{{ $ctrl.parseError }}</span>\\n</div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/editor/editor.html\n// module id = 598\n// module chunks = 1","import template from './nav.html'\nimport './nav.css'\n// TODO: don't need core, just look at redux\nimport { uriEncode, formats } from '../core/index'\nimport { readAllText } from './importer'\nimport * as aboutComponent from './about.component'\nimport { sourceChanged, githubLoggedIn, githubLogout, exported } from '../store/actions'\n\n/* global process */\nconst githubLoginPopupUrl = process.env.C4_GITHUB_LOGIN_POPUP_URL\n    || 'https://c4-lab.azurewebsites.net/api/GithubLogin?code=CZiBo89DKe5LcWUHYtYqQYkTZUU1OmLsIXOFxmBfLaL3HmVXVTCbkg==';\n\nclass NavController {\n    constructor($state, $uibModal, $ngRedux, $window) {\n        'ngInject'\n        this.$state = $state\n        this.$uibModal = $uibModal\n        this.exportFormats = formats\n        this.$window = $window;\n\n        this.unsubscribe = $ngRedux.connect(\n            this.mapStateToThis,\n            { sourceChanged, githubLoggedIn, githubLogout, exported })(this);\n    }\n\n    $onDestroy() {\n        this.unsubscribe();\n    }\n\n    mapStateToThis(state) {\n        return {\n            text: state.source,\n            zoom: state.zoomNodeId,\n            user: state.user\n        }\n    }\n\n    href(zoom) {\n        return this.$state.href('load',\n            {\n                data: uriEncode(this.text),\n                zoom\n            });\n    }\n\n    export(format) {\n        this.exported({ format })\n    }\n\n    import(files) {\n        if (files) {\n            readAllText(files[0])\n                .then(text => this._onImport(text))\n        }\n    }\n\n    // TODO: make this a route\n    openAbout() {\n        this.$uibModal.open({\n            component: aboutComponent.name\n        })\n    }\n\n    _onImport(source) {\n        this.sourceChanged({ source })\n    }\n\n    login() {\n        const expectedOrigin = new URL(githubLoginPopupUrl).origin;\n        this.$window.open(githubLoginPopupUrl, 'Github authentication');\n\n        this.$window.addEventListener('message', (event) => {\n            if (event.origin === expectedOrigin) {\n                this.githubLoggedIn({ token: event.data.payload.token })\n            }\n        }, { capture: false, once: true })\n    }\n}\n\nexport const name = \"c4LabNav\"\nexport const options = {\n    template: template,\n    controller: NavController,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/header/nav.component.js","module.exports = \"<nav class=\\\"navbar navbar-default\\\">\\n    <div class=\\\"container-fluid\\\">\\n        <div class=\\\"navbar-header\\\">\\n            <a class=\\\"navbar-brand\\\" href=\\\"#\\\">C4 Lab</a>\\n        </div>\\n\\n        <p class=\\\"navbar-text navbar-right c4lab-build\\\">\\n            <c4-lab-build-info></c4-lab-build-info>\\n        </p>\\n\\n        <div class=\\\"navbar-collapse collapse\\\">\\n            <ul class=\\\"nav navbar-nav\\\">\\n                <li>\\n                    <a popover-placement=\\\"bottom\\\" uib-popover-template=\\\"'_share.html'\\\" analytics-on=\\\"click\\\"\\n                        analytics-event=\\\"share\\\">\\n                        <span class=\\\"glyphicon glyphicon-duplicate\\\"> </span> Share\\n                    </a>\\n                </li>\\n                <li>\\n                    <a ngf-select=\\\"$ctrl.import($files)\\\" ngf-pattern=\\\"'.sexp'\\\" ngf-accept=\\\"'.sexp'\\\" analytics-on=\\\"click\\\"\\n                        analytics-event=\\\"import\\\">\\n                        <span class=\\\"glyphicon glyphicon-open-file\\\"> </span> Import\\n                    </a>\\n                </li>\\n                <li class=\\\"dropdown\\\" uib-dropdown>\\n                    <a uib-dropdown-toggle>\\n                        <span class=\\\"glyphicon glyphicon-picture\\\"> </span> Export <span class=\\\"caret\\\"></span>\\n                    </a>\\n                    <ul id=\\\"export-format-list\\\" class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n                        <li ng-repeat=\\\"format in $ctrl.exportFormats\\\">\\n                            <a ng-click=\\\"$ctrl.export(format)\\\" analytics-on=\\\"click\\\" analytics-event=\\\"export\\\"\\n                                analytics-label=\\\"{{format}}\\\">{{format}}</a>\\n                        </li>\\n                        <li ng-if=\\\"$ctrl.user\\\">\\n                            <a ng-click=\\\"$ctrl.export('gist')\\\" analytics-on=\\\"click\\\" analytics-event=\\\"export\\\"\\n                                analytics-label=\\\"gist\\\">GitHub Private Gist&nbsp;<img src=\\\"\" + require(\"./GitHub-Mark-32px.png\") + \"\\\"></a>\\n                        </li>\\n                    </ul>\\n                </li>\\n                <li>\\n                    <!-- TODO: make this a modal route-->\\n                    <a href=\\\"#\\\" ng-click=\\\"$ctrl.openAbout()\\\" analytics-on=\\\"click\\\" analytics-event=\\\"about\\\">\\n                        <span class=\\\"glyphicon glyphicon-info-sign\\\"> </span> About\\n                    </a>\\n                </li>\\n                <li>\\n                    <a ui-sref=\\\"help\\\">\\n                        <span class=\\\"glyphicon glyphicon-question-sign\\\"> </span> Help\\n                    </a>\\n                </li>\\n                <p class=\\\"navbar-text\\\" ng-if=\\\"$ctrl.user\\\">\\n                    <img ng-src=\\\"{{$ctrl.user.avatarUrl}}\\\" height=20 class=\\\"img-circle\\\">\\n                    {{$ctrl.user.login}}\\n                    <a href=\\\"#\\\" class=\\\"navbar-link\\\" ng-click=\\\"$ctrl.githubLogout()\\\">Logout</a>\\n                </p>\\n                <li ng-if=\\\"!$ctrl.user\\\">\\n                    <a href=\\\"#\\\" ng-click=\\\"$ctrl.login()\\\">\\n                        Login with Github\\n                    </a>\\n                </li>\\n            </ul>\\n        </div>\\n    </div>\\n</nav>\\n\\n<script type=\\\"text/ng-template\\\" id=\\\"_share.html\\\">\\n    <div style=\\\"width:10em;\\\">\\n        <a ng-href=\\\"{{$ctrl.href($ctrl.zoom)}}\\\" target=\\\"_blank\\\">\\n            <span class=\\\"glyphicon glyphicon-new-window\\\" > </span>\\n            Link to this page</a>\\n    </div>\\n</script>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/header/nav.html\n// module id = 601\n// module chunks = 1","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyQTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyQjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTI4OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTI5OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+m4QGuQAAAyRJREFUeNrEl21ojWEYx895TDPbMNlBK46IUiNmPvHBSUjaqc0H8pF5+aDUKPEBqU2NhRQpX5Rv5jWlDIWlMCv7MMSWsWwmb3tpXub4XXWdPHvc9/Gc41nu+nedc7/8r/99PffLdYdDPsvkwsgkTBwsA/PADJCnzX2gHTwBt8Hl7p537/3whn04XoDZDcpBlk+9P8AFcAghzRkJwPF4zGGw0Y9QS0mAM2AnQj77FqCzrtcwB1Hk81SYojHK4DyGuQ6mhIIrBWB9Xm7ug/6B/nZrBHBegrkFxoVGpnwBMSLR9EcEcC4qb8pP14BWcBcUgewMnF3T34VqhWMFkThLJAalwnENOAKiHpJq1FZgI2AT6HZtuxZwR9GidSHtI30jOrbawxlVX78/AbNfhHlomEUJJI89O2MqeE79T8/nk8nMBm/dK576hZgmA3cp/R4l9/UeSxiHLVIlNm4nFfT0bxyuIj7LHRTKai+zdJobwMKzcZSJb0ePV5PKN+BqAAKE47UlMnERELMM3EdYP/yrd+XYb2mOiYBiQ8OQnoRBlXrl9JZix7D1pHTazu4MoyBcnYamqAjIMTR8G4FT8LuhLsexXYYjICBiqhQBvYb6fLZIJCjPypVvaOoVAW2WcasCnL2Nq82xHJNSqlCeFcDshaPK0twkAhosjZL31QYw+1rlMpWGMArl23SBsZZO58F2tlJXmjOXS+s4WGvpMiBJT/I2PInZ6lIs9/hBsNS1hS6BG0DSqmYEDRlCXQrmy50P1oDRKTSegmNbUsA0zDMwRhPJXeCE3vWLPQMvan6X8AgIa1vcR4AkGZkDR4ejJ1UHpsaVI0g2LInpOsNFUud1rhxSV+fzC9Woz2EZkWQuja7/B+jUrgtIMpy9YCW4n4K41YfzRneW5E1KJTe4B2Zq1Q5EHEtj4U3AfEzR5SVY4l7QYQPJdN2as7RKBF0BPZqqH4VgMAMBL8Byxr7y8zCZiDlnOcEKIPmUpgB5Z2ww5RdOiiRiNajUmWda5IG6WbhsyY2fx6m8gLcoJDJFkH219M3We1+cnda93pfycZpIJEL/s/wSYADmOAwAQgdpBAAAAABJRU5ErkJggg==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/header/GitHub-Mark-32px.png\n// module id = 602\n// module chunks = 1","import { Parser } from './Parser'\nexport { SyntaxError } from 'sexpr-plus'\nexport { default as ParseError } from './ParseError'\nexport { default as InvalidDirectionError } from './InvalidDirectionError'\nexport { default as OptsNotFoundError } from './OptsNotFoundError'\nexport { default as NameNotFoundError } from './NameNotFoundError'\n\nexport const parse = (text: string) => new Parser().parse(text)\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/parse/index.ts","import * as path from 'path'\nimport * as sexp from 'sexpr-plus'\nimport { Md5 } from 'ts-md5/dist/md5'\n\nimport { IEdge, IGraph, INode, isEdge, NodeId } from '../interfaces'\n\nimport InvalidDirectionError from './InvalidDirectionError'\nimport NameNotFoundError from './NameNotFoundError'\nimport OptsNotFoundError from './OptsNotFoundError'\nimport ParseError from './ParseError'\nimport TitleNotAStringError from './TitleNotAStringError'\nimport TitleNotAtTopLevelError from './TitleNotAtTopLevelError'\n\nexport const pathToId = (p: string) => Md5.hashStr(p, false) as string\n\nfunction isString(x: sexp.Item): x is sexp.String {\n    return x && x.type === 'string'\n}\n\nfunction isList(x: sexp.Item): x is sexp.List {\n    return x && x.type === 'list'\n}\n\nfunction isAtom(x: sexp.Item): x is sexp.Atom {\n    return x && x.type === 'atom'\n}\n\nconst stripComments = (text: string) => text.replace(/^\\s*;;.*$/gm, '')\n\nconst keywordAliases = [\n    { from: /^:desc.*/i, to: 'description' },\n    { from: /^:to/i, to: 'to' },\n    { from: /^:tech/i, to: 'tech' },\n    { from: /^:dir.*/i, to: 'direction' },\n]\n\nfunction canonicalize(key: string) {\n    return keywordAliases\n        .filter(({ from }) => from.test(key))\n        .map(({ to }) => to)[0] || key\n}\n\nfunction parseKeywordArgs(kwargs: sexp.Item[], allowed = /.*/): any {\n    if (kwargs.length === 0) { return {} }\n\n    const [keyword, value, ...rest] = kwargs\n    if (!isAtom(keyword)) { throw new Error('Expected keyword to be an atom') }\n    if (!isString(value)) { throw new Error('Expected value to be a string') }\n\n    const key = canonicalize(keyword.content)\n\n    return Object.assign(\n        allowed.test(key) ? { [key]: value.content } : {},\n        parseKeywordArgs(rest, allowed))\n}\n\nexport class Parser {\n\n    private idMap: { [id: string]: INode }\n    private pathMap: { [id: string]: NodeId }\n    private edges: IEdge[]\n    private items: INode[]\n    private graphTitle: string = ''\n\n    constructor() {\n        this.idMap = {}\n        this.pathMap = {}\n        this.edges = []\n        this.items = []\n    }\n\n    public parse(text: string): IGraph {\n        const tokens = sexp.parse(text)\n        this.buildIR(tokens)\n        for (const e of this.edges) {\n            this.postProcessEdge(e)\n        }\n\n        return {\n            edges: this.edges,\n            idMap: this.idMap,\n            items: this.items,\n            pathMap: this.pathMap,\n            roots: this.items\n                .filter((x) => !x.parentId)\n                .map((x) => x.id),\n            title: this.graphTitle,\n        }\n    }\n\n    private buildIR(tokens: sexp.Item[], parent?: INode) {\n        return tokens.map((x) => this.buildIRNode(x, parent))\n    }\n\n    private buildIRNode(token: sexp.Item, parent?: INode): INode | IEdge | null {\n        if (!isList(token)) {\n            throw new Error('bare string not permitted')\n        }\n        const [head, ...tail] = token.content\n        if (!isAtom(head)) {\n            throw new Error(`expected atom, found ${head.type}`)\n        }\n        const node = this._buildIRNode(head.content, tail, parent)\n        if (!node) { return null }\n\n        if (!isEdge(node) && !node.children.every(isEdge)) {\n            node.canExpand = true\n        }\n        return node\n    }\n\n    private _buildIRNode(head: string, tail: sexp.Item[], parent?: INode): INode | IEdge | null {\n        const type = head.replace(/^def(ine)?-/i, '').toLowerCase().trim()\n        switch (type) {\n            case 'edge':\n                return this.edge(tail, parent)\n            case 'title':\n                this.title(tail, parent)\n                return null\n            default:\n                return this.item(type, tail, parent)\n        }\n    }\n\n    private item(type: string, tokens: sexp.Item[], parent?: INode): INode {\n        const [opts, ...children] = tokens\n        if (!isList(opts)) {\n            throw new OptsNotFoundError(type)\n        }\n        const [name, ...kwargs] = opts.content\n        if (!isString(name) || name.content === '') {\n            throw new NameNotFoundError(type)\n        }\n\n        const p = this.pathToNode(name.content, parent).toString()\n        const node: INode = {\n            children: [],\n            id: pathToId(p),\n            name: name.content,\n            path: p,\n            type,\n        }\n        if (parent) {\n            node.parentId = parent.id\n        }\n\n        this.idMap[node.id] = node\n        this.pathMap[node.path] = node.id\n        Object.assign(node,\n            parseKeywordArgs(kwargs, /description|tech/))\n        this.items.push(node)\n        for (const n of this.buildIR(children, node)) {\n            if (n) {\n                node.children.push(n)\n            }\n        }\n        return node\n    }\n\n    private edge(kwargs: sexp.Item[], parent?: INode): IEdge {\n        if (!parent) { throw new Error('edge at top level?') }\n        const edge = Object.assign(\n            { sourceId: parent.id, type: 'edge' },\n            parseKeywordArgs(kwargs, /description|to|tech|direction/))\n        this.edges.push(edge)\n        return edge\n    }\n\n    private title([input]: sexp.Item[], parent?: INode): void {\n        if (!isString(input)) {\n            throw new TitleNotAStringError(input.toString())\n        }\n        if (parent) { throw new TitleNotAtTopLevelError() }\n        this.graphTitle = input.content\n    }\n\n    private pathToNode(name: string, parent?: INode): string {\n        return parent\n            ? this.idMap[parent.id].path + '/' + name\n            : name\n    }\n\n    private postProcessEdge(edge: IEdge) {\n        if (edge.to.startsWith('.')) {\n            const src = this.idMap[edge.sourceId]\n            if (!src.parentId) {\n                throw new Error('relative paths have to have a parent')\n            }\n            const parent = this.idMap[src.parentId]\n            edge.to = path.join(parent.path, edge.to)\n        }\n\n        edge.destinationId = this.pathMap[edge.to]\n\n        if (!edge.destinationId) {\n            throw new ParseError(`Could not find node '${edge.to}'`)\n        }\n        if (edge.sourceId === edge.destinationId) {\n            throw new ParseError(`Edge cannot be both from and to '${edge.to}'`)\n        }\n        if (edge.direction) {\n            if (/^(push|pull|both)$/i.test(edge.direction)) {\n                edge.direction = edge.direction.toLowerCase()\n            } else {\n                throw new InvalidDirectionError(edge.direction)\n            }\n        }\n\n        edge.id = pathToId(edge.sourceId + edge.destinationId)\n        edge.sourceParentIds = this.findParentIds(edge.sourceId)\n        edge.destinationParentIds = this.findParentIds(edge.destinationId)\n    }\n\n    private findParentIds(id: string): string[] {\n        const node = this.idMap[id]\n        if (!node.parentId) { return [] }\n\n        return [node.parentId]\n            .concat(this.findParentIds(node.parentId))\n    }\n}\n\n/*\nTODO: detect errors:\n\n* duplicate paths\n\n*/\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/parse/Parser.ts","\nexport interface IGraph {\n    items: INode[]\n    edges: IEdge[]\n    title?: string\n    roots: NodeId[]\n    idMap: { [id: string]: INode }\n    pathMap: { [path: string]: NodeId }\n}\n\nexport interface IEdge {\n    type: 'edge'\n    id: NodeId\n    sourceId: NodeId\n    to: Path\n    destinationId: NodeId\n    sourceParentIds: NodeId[]\n    destinationParentIds: NodeId[]\n    description?: string\n    tech?: string\n    direction?: string\n}\n\nexport function isEdge(x: INode | IEdge): x is IEdge {\n    return x.type === 'edge'\n}\n\nexport interface INode {\n    type: string\n    name: string\n    id: NodeId\n    path: Path\n    children: Array<INode | IEdge>\n    parentId?: NodeId\n    description?: string\n    tech?: string\n    canExpand?: boolean\n}\n\nexport type NodeId = string\nexport type Path = string\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/interfaces.ts","import ParseError from './ParseError'\n\nexport default class TitleNotAStringError extends ParseError {\n    constructor(input: string) {\n        super('title must be a string, was: ' + JSON.stringify(input))\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/parse/TitleNotAStringError.ts","import ParseError from './ParseError'\n\nexport default class TitleNotAtTopLevelError extends ParseError {\n    constructor() {\n        super('title is only allowed at the top level')\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/parse/TitleNotAtTopLevelError.ts","const LOCALSTORAGE_KEY = 'C4-LAB-ACTIVE-DOC-VNEXT'\n\nexport class DataStore {\n\n    constructor(private localStorage: Storage) { }\n\n    public load() {\n        return this.localStorage.getItem(LOCALSTORAGE_KEY)\n    }\n\n    public save(text: string) {\n        this.localStorage.setItem(LOCALSTORAGE_KEY, text)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/DataStore.ts","import { toPngDataUri } from '../codegen'\n\nexport const formats = 'sexp dot png'.split(' ')\n\nexport class Exporter {\n    private createElement: (e: string) => HTMLElement\n\n    constructor(document: HTMLDocument) {\n        this.createElement = (e) => document.createElement(e)\n    }\n\n    public export(format: string, title: string | null, text: string, dot: string) {\n        const safeTitle = title || 'c4-lab-graph'\n        switch (format) {\n            case 'sexp':\n                return this.sexp(safeTitle, text)\n            case 'dot':\n                return this.dot(safeTitle, dot)\n            case 'png':\n                return this.png(safeTitle, dot)\n            default:\n                throw new Error(`unknown format: ${format}`)\n        }\n    }\n\n    public sexp(title: string, text: string) {\n        this.downloadFile(`${title}.sexp`, text, 'text/plain')\n    }\n\n    private dot(title: string, dot: string) {\n        this.downloadFile(`${title}.dot`, dot, 'text/plain')\n    }\n\n    private png(title: string, dot: string) {\n        toPngDataUri(dot, this.createElement)\n            .then((dataUri) => this.downloadFile(`${title}.png`, dataUri))\n    }\n\n    private downloadFile(filename: string, content: string, contentType?: string) {\n        const a = this.createElement('a') as HTMLAnchorElement\n        a.download = filename\n        if (contentType) {\n            a.href = `data:${contentType},${encodeURIComponent(content)}`\n        } else {\n            a.href = content\n        }\n        a.click()\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/exporter/index.ts","import { flattenDeep, isString, uniq } from 'lodash'\nimport * as wordwrap from 'wordwrap'\nimport { DOT } from './DOT'\nimport { IEdge, IGraph, INode, NodeId } from './interfaces'\n\nconst DEFAULT_SHAPE = 'box'\nconst typeShapeMap: any = {\n    actor: 'egg',\n    component: 'component',\n    container: 'box3d',\n}\n\nconst VERBOSE = false\nconst INDENT = '  '\n\nexport class DotContext {\n    private wordwrap: (text: string) => string\n    private hrefTo?: (text: string) => string\n    private graph?: IGraph\n    private zoomNodeId?: NodeId\n    private visibleIds: NodeId[] = []\n    private visibleEdges: IEdge[] = []\n    private rootNode?: INode\n\n    constructor(hrefTo?: ((text: string) => string)) {\n        // TODO: why doesn't `wordwrap(30)` work? Something about typescript definitions\n        this.wordwrap = wordwrap.soft(0, 30)\n        this.hrefTo = hrefTo\n    }\n\n    public load(graph: IGraph, zoomNodeId: NodeId) {\n        this.graph = graph\n        this.zoomNodeId = zoomNodeId\n        this.visibleIds = zoomNodeId\n            ? this.findVisibleNodes(zoomNodeId)\n            : graph.roots\n\n        this.visibleIds.sort()\n\n        this.visibleEdges = graph.edges\n            .filter((x) => this.isEdgeVisible(x))\n    }\n\n    public draw() {\n        return [...this._draw()].join('\\n')\n    }\n\n    private * _draw() {\n        yield `digraph g {`\n        yield* this.digraphHeaders(INDENT)\n        if (this.rootNode) {\n            if (this.rootNode.parentId) {\n                yield* this.drawChildCluster(INDENT, this.rootNode.parentId)\n            } else {\n                yield* this.drawCluster(INDENT, this.rootNode)\n            }\n        } else {\n            yield* this.drawItems(this.visibleIds, INDENT)\n        }\n        yield ''\n        yield* this.visibleEdges.map((x) => this.drawEdge(x, INDENT))\n        yield '}'\n        yield ''\n    }\n\n    private findVisibleNodes(zoomNodeId: NodeId) {\n        if (!this.graph) { throw new Error('must have a graph') }\n        this.rootNode = this.graph.idMap[zoomNodeId]\n        let visibleNodes = this.rootNode.children\n            .concat([this.rootNode])\n\n        if (this.rootNode.parentId) {\n            const parent = this.graph.idMap[this.rootNode.parentId]\n            visibleNodes = visibleNodes.concat(parent.children)\n            visibleNodes.push(parent)\n        }\n\n        const visibleIds = visibleNodes\n            .map((x) => x.id)\n            .concat(this.graph.roots)\n            .filter((x) => x)\n\n        return uniq(visibleIds)\n    }\n\n    private toDotId(nodeOrId: string | INode | IEdge) {\n        const id = isString(nodeOrId) ? nodeOrId : nodeOrId.id\n\n        return 'g' + this.visibleIds.indexOf(id)\n    }\n\n    private toDescription(nodeOrText: string | INode | IEdge, htmlNewlines = true) {\n        const text = isString(nodeOrText) ? nodeOrText : nodeOrText.description\n\n        if (!text) { return '' }\n\n        const wrapped = this.wordwrap(text)\n\n        return htmlNewlines\n            ? wrapped.replace(/\\n/g, '<br/>\\n')\n            : wrapped\n    }\n\n    private toLabel(edgeOrText: string | IEdge) {\n        return this.toDescription(edgeOrText, false)\n            .replace(/\"/g, '\\\\\"')\n            .replace(/\\n/g, '\\\\n')\n    }\n\n    private isEdgeVisible(edge: IEdge) {\n        return this.isIdVisible(edge.sourceId)\n            || this.isIdVisible(edge.destinationId)\n            || this.isCrossingSystems(edge)\n    }\n\n    private isCrossingSystems(edge: IEdge) {\n        const visibleSourceIds = this.findVisibleIds(edge.sourceParentIds)\n        const visibleDestinationIds = this.findVisibleIds(edge.destinationParentIds)\n\n        return visibleSourceIds[0] !== visibleDestinationIds[0]\n    }\n\n    private findVisibleIds(ids: string[]) {\n        return ids.filter((x) => this.isIdVisible(x))\n    }\n\n    private isIdVisible(id: string) {\n        return this.visibleIds.includes(id)\n    }\n\n    private * drawCluster(indent: string, rootNode: INode, style = 'rounded') {\n        if (!this.graph) { throw new Error('must have a graph') }\n\n        const dotId = this.toDotId(rootNode)\n        const label = this.toLabel(rootNode.name)\n\n        if (VERBOSE) { yield `${indent}# <drawCluster>` }\n        yield `${indent}subgraph cluster_${dotId} {\n${indent}  label=<${DOT.b(label)}> style=\"${style}\"`\n        yield ''\n        yield `${indent}  ${dotId} [style=\"invisible\"]`\n        yield ''\n        yield* this.drawItems(rootNode.children, indent + INDENT)\n        yield `${indent}}`\n        if (!rootNode.parentId) {\n            const nonClustered = this.graph.roots\n                .filter((x) => x !== rootNode.id)\n                .filter((x) => x !== rootNode.parentId)\n\n            yield* this.drawItems(nonClustered, indent)\n        }\n        if (VERBOSE) { yield `${indent}# </drawCluster>` }\n    }\n\n    private * drawChildCluster(indent: string, parentId: NodeId) {\n        if (!this.graph) { throw new Error('must have a graph') }\n        if (!this.rootNode) { throw new Error('must have a rootNode') }\n\n        const parent = this.graph.idMap[parentId]\n        const dotId = this.toDotId(parent)\n        const label = this.toLabel(parent.name)\n\n        const nonClustered = this.graph.roots\n            .filter((x) => x !== parent.id)\n        const otherChildren = parent.children\n            .filter((x) => x !== this.rootNode)\n\n        const nextIndent = `${indent}${INDENT}`\n\n        if (VERBOSE) { yield `${indent}# <drawChildCluster>` }\n        yield `${indent}subgraph cluster_${dotId} {`\n        yield `${nextIndent}label=<${DOT.b(label)}> style=\"rounded\"`\n        yield ''\n        yield `${nextIndent}${dotId} [style=\"invisible\"]`\n        yield* this.drawItems(otherChildren, nextIndent)\n        yield ''\n        yield* this.drawCluster(nextIndent, this.rootNode, 'solid')\n        yield `${indent}}`\n        yield* this.drawItems(nonClustered, indent)\n        if (VERBOSE) { yield `${indent}# </drawChildCluster>` }\n    }\n\n    private * digraphHeaders(indent: string) {\n        if (!this.graph) { throw new Error('must have a graph') }\n\n        yield `${indent}compound=true`\n        if (this.graph.title) {\n            yield `${indent}label=\"${this.toLabel(this.graph.title)}\"`\n            yield `${indent}fontsize=20`\n            yield `${indent}labelloc=t`\n        }\n        yield `${indent}node[fontsize=12]`\n        yield `${indent}edge[fontsize=12]`\n        yield ''\n    }\n\n    private toTechDescription(text?: string) {\n        if (!text) { return '' }\n\n        text = this.toDescription(text)\n        text = DOT.font('#666666', DOT.i(`&#171;${text}&#187;`))\n\n        return `\n<br/>\n${text}\n<br/>`\n    }\n\n    private * drawItems(nodesOrIds: Array<string | INode | IEdge>, indent: string) {\n        if (!this.graph) { throw new Error('must have a graph') }\n        const { idMap } = this.graph\n        if (VERBOSE) { yield `${indent}# <drawItems>` }\n        yield* nodesOrIds\n            .map((x) => isString(x) ? idMap[x] : x)\n            .filter((x) => x.type !== 'edge')\n            .map((x) => this.drawItem((x as INode), indent))\n        if (VERBOSE) { yield `${indent}# </drawItems>` }\n    }\n\n    private drawItem(node: INode, indent: string) {\n        const dotId = this.toDotId(node)\n\n        const tech = this.toTechDescription(node.tech)\n\n        const desc = node.description\n            ? '\\n<br/>\\n' + this.toDescription(node)\n            : ''\n\n        const shape = typeShapeMap[node.type] || DEFAULT_SHAPE\n\n        const attrs: any = {\n            shape,\n        }\n\n        let name = DOT.b(node.name)\n        if (this.hrefTo && node.children && node.children.some((x) => x.type !== 'edge')) {\n            attrs.href = this.hrefTo(node.id)\n            attrs.tooltip = `See more details about ${node.name}`\n            name = DOT.font('blue', DOT.u(name))\n        }\n\n        attrs.label = `<\n${name}${tech}${desc}\n${indent}>`\n\n        return `${indent}${dotId} ${DOT.attrList(attrs)}`\n    }\n\n    private drawEdge(edge: IEdge, indent: string) {\n\n        const srcOk = this.isIdVisible(edge.sourceId)\n        const dstOk = this.isIdVisible(edge.destinationId)\n\n        const getId = (idOk: boolean, id: NodeId, parentIds: NodeId[]) => {\n            const result = idOk\n                ? id\n                : parentIds.find((x) => this.isIdVisible(x))\n\n            if (result) { return result }\n            throw new Error('Unknown id')\n        }\n\n        const srcId = getId(srcOk, edge.sourceId, edge.sourceParentIds)\n        const dstId = getId(dstOk, edge.destinationId, edge.destinationParentIds)\n\n        const src = this.toDotId(srcId)\n        const dst = this.toDotId(dstId)\n\n        const attrs: any = {}\n\n        if (edge.description) {\n            attrs.label = this.toLabel(edge)\n        }\n\n        if (!(srcOk && dstOk)) {\n            attrs.style = 'dashed'\n        }\n\n        if (srcId === this.zoomNodeId) {\n            attrs.ltail = `cluster_${src}`\n        }\n\n        if (dstId === this.zoomNodeId) {\n            attrs.lhead = `cluster_${dst}`\n        }\n        attrs.dir = this.getEdgeDirection(edge.direction)\n\n        return `${indent}${src} -> ${dst} ${DOT.attrList(attrs)}`\n    }\n\n    private getEdgeDirection(direction: string | undefined): string | null {\n        switch (direction) {\n            case 'both':\n                return 'both'\n            case 'pull':\n                return 'back'\n            default:\n                return null\n        }\n    }\n}\n\n/**\n * build a DOT representation of the graph\n */\nexport const toDot = (graph: IGraph, zoomNodeId: NodeId, hrefTo: (id: string) => string) => {\n    const ctx = new DotContext(hrefTo)\n    ctx.load(graph, zoomNodeId)\n    return ctx.draw()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/dot-writer.ts","export class DOT {\n    public static i(text: string) { return `<i>${text}</i>` }\n    public static b(text: string) { return `<b>${text}</b>` }\n    public static u(text: string) { return `<u>${text}</u>` }\n    public static font(color: string, text: string) { return `<font color=\"${color}\">${text}</font>` }\n    public static attrList(attrs: any) {\n        const dotAttrs = Reflect.ownKeys(attrs)\n            .filter((x) => attrs[x])\n            .map((x) => `${String(x)}=${DOT.quoteAttr(attrs[x])}`)\n            .join(' ')\n\n        return `[${dotAttrs}]`\n    }\n    public static quoteAttr(value: string) {\n        return /^</.test(value) ? value : `\"${value}\"`\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/DOT.ts","export default class ParseError extends Error { }\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/parse/ParseError.ts","export const readAllText = file => {\n    const reader = new FileReader()\n    return new Promise((resolve, reject) => {\n        reader.onload = loadEvt => resolve(loadEvt.target.result);\n        reader.onerror = reject;\n        reader.readAsText(file);\n    });\n}\n\n\n// WEBPACK FOOTER //\n// ./src/header/importer.js","module.exports = \"<div class=\\\"modal-header\\\">\\n    <h3 class=\\\"modal-title\\\" id=\\\"modal-title\\\">About</h3>\\n</div>\\n<div class=\\\"modal-body\\\" id=\\\"modal-body\\\">\\n    <p>C4 Lab helps to create diagrams expressing a software architecture using a small lisp-like language, and share those\\n        diagrams as images or text.\\n    </p>\\n    <p>\\n        This is a based on <a href=\\\"http://www.simonbrown.je/\\\">Simon Brown</a>'s <a href=\\\"http://www.codingthearchitecture.com/2014/08/24/c4_model_poster.html\\\">C4</a>        approach: Context, Containers, Components, and Classes. See <a href=\\\"https://leanpub.com/visualising-software-architecture\\\">Visualising Software Architecture</a>        for more information.\\n    </p>\\n    <p>\\n        If you have any feedback or problems, please open a <a href=\\\"https://github.com/ryepup/c4-lab/issues\\\">issue on github</a>.\\n    </p>\\n    <c4-lab-build-info></c4-lab-build-info>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n    <button class=\\\"btn btn-primary\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.close()\\\">Close</button>\\n</div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/header/about.html\n// module id = 621\n// module chunks = 1","export * from \"./app.component\"\n\n\n// WEBPACK FOOTER //\n// ./src/shell/index.js","import template from './app.html'\n\nexport class AppController {\n    constructor() {\n        'ngInject'\n        this.codeExpanded = true;\n    }\n}\n\nexport const name = \"c4LabApp\"\nexport const options = {\n    template: template,\n    controller: AppController\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shell/app.component.js","module.exports = \"<c4-lab-nav></c4-lab-nav>\\n<div class=\\\"container-fluid\\\">\\n    <div class=\\\"row\\\">\\n        <div ng-class=\\\"$ctrl.codeExpanded ? 'col-md-6' : 'col-md-4'\\\">\\n            <c4-lab-editor></c4-lab-editor>\\n\\n            <button class=\\\"btn btn-default btn-block\\\" type=\\\"button\\\" ng-click=\\\"$ctrl.codeExpanded = !$ctrl.codeExpanded\\\">\\n                <span class=\\\"glyphicon\\\" ng-class=\\\"$ctrl.codeExpanded ? 'glyphicon-chevron-left' : 'glyphicon-chevron-right'\\\"></span>\\n                Show {{$ctrl.codeExpanded ? 'less' : 'more'}} code\\n            </button>\\n        </div>\\n        <div ng-class=\\\"$ctrl.codeExpanded ? 'col-md-6' : 'col-md-8'\\\">\\n            <c4-lab-viewer></c4-lab-viewer>\\n        </div>\\n    </div>\\n</div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/shell/app.html\n// module id = 624\n// module chunks = 1","import template from './template.html'\n\nclass BuildInfoController {\n    constructor() {\n        /* global process */\n        this.version = process.env.npm_package_version\n        this.build = process.env.TRAVIS_BUILD_NUMBER || 'SNAPSHOT'\n        this.hash = process.env.TRAVIS_COMMIT || process.env.npm_package_gitHead || 'HEAD'\n    }\n}\n\nexport const name = 'c4LabBuildInfo'\nexport const options = {\n    template: template,\n    controller: BuildInfoController\n}\n\n\n// WEBPACK FOOTER //\n// ./src/build-info/index.js","module.exports = \"<span class=\\\"text-muted small\\\" title=\\\"{{$ctrl.hash}}\\\">\\n  v{{$ctrl.version}}+{{$ctrl.build}}\\n</span>\\n\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/build-info/template.html\n// module id = 626\n// module chunks = 1","import { zoomChanged } from './store/actions'\n\nfunction configureRoutes($stateProvider, $urlRouterProvider) {\n  'ngInject'\n  $urlRouterProvider.otherwise('/');\n  $stateProvider\n    .state('home', {\n      url: '/?zoom',\n      component: 'c4LabApp',\n      resolve: {\n        zoom: $stateParams => $stateParams.zoom\n      },\n      onEnter: (zoom, $ngRedux) => {\n        const currentZoom = $ngRedux.getState().zoomNodeId;\n        if (currentZoom !== zoom) {\n          $ngRedux.dispatch(zoomChanged({ zoomNodeId: zoom }))\n        }\n      }\n    })\n    .state('load', {\n      url: '/load/{data}?zoom',\n      component: 'c4LabPreview',\n      resolve: {\n        encodedText: $stateParams => $stateParams.data,\n        zoom: $stateParams => $stateParams.zoom\n      },\n      onEnter: (zoom, $ngRedux) => {\n        // TODO: dedupe with other endpoint\n        const currentZoom = $ngRedux.getState().zoomNodeId;\n        if (currentZoom !== zoom) {\n          $ngRedux.dispatch(zoomChanged({ zoomNodeId: zoom }))\n        }\n      }\n\n    })\n    .state('help', {\n      url: '/help',\n      component: 'c4LabHelp'\n    })\n}\n\nexport default configureRoutes;\n\n\n// WEBPACK FOOTER //\n// ./src/routes.js","import * as angular from 'angular'\nimport * as previewComponent from './preview.component'\nimport header from '../header'\nimport viewer from '../viewer'\n\nexport default angular.module('c4-lab.preview', [header, viewer])\n    .component(previewComponent.name, previewComponent.options)\n    .name;\n\n\n// WEBPACK FOOTER //\n// ./src/preview/index.js","import template from './preview.html'\nimport { preview, previewEdit } from '../store/actions'\n\nclass PreviewComponent {\n    constructor($ngRedux) {\n        this.unsubscribe = $ngRedux.connect(\n            null,\n            { preview, previewEdit })(this);\n\n    }\n\n    $onDestroy() {\n        this.unsubscribe();\n    }\n\n    $onChanges() {\n        this.preview({\n            encodedSource: this.encodedText\n        })\n    }\n}\n\n\nexport const name = 'c4LabPreview';\nexport const options = {\n    template,\n    controller: PreviewComponent,\n    bindings: {\n        encodedText: '<'\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/preview/preview.component.js","module.exports = \"<c4-lab-nav></c4-lab-nav>\\n<c4-lab-viewer>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary hidden-xs hidden-sm\\\" ng-click=\\\"$ctrl.previewEdit()\\\">Start editing this\\n        graph</button>\\n</c4-lab-viewer>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/preview/preview.html\n// module id = 630\n// module chunks = 1","import template from './viewer.html'\nimport { zoomChanged } from '../store/actions'\n\n\nclass ViewerComponent {\n    constructor($log, $sce, $ngRedux) {\n        'ngInject'\n        this.$log = $log;\n        this.$sce = $sce;\n\n        this.unsubscribe = $ngRedux.connect(this.mapStateToThis.bind(this), { zoomChanged })(this);\n    }\n\n    $onDestroy() {\n        this.unsubscribe();\n    }\n\n    mapStateToThis(state) {\n        return {\n            expandableNodes: state.zoomableNodes,\n            graph: state.graph,\n            zoom: state.zoomNodeId,\n            dot: state.dot,\n            svg: this.$sce.trustAsHtml(state.svg)\n        }\n    }\n\n    onZoom() {\n        this.zoomChanged({ zoomNodeId: this.zoom });\n    }\n}\n\nexport const name = 'c4LabViewer';\nexport const options = {\n    transclude: true,\n    template,\n    controller: ViewerComponent\n}\n\n\n// WEBPACK FOOTER //\n// ./src/viewer/viewer.component.js","module.exports = \"<div>\\n    <form class=\\\"form-inline\\\">\\n        <div class=\\\"form-group\\\">\\n            <label for=\\\"zoomableNodes\\\">Zoom to node</label>\\n            <select name=\\\"zoomableNodes\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.zoom\\\" ng-change=\\\"$ctrl.onZoom()\\\">\\n                <option ng-value=\\\"undefined\\\">--none--</option>\\n                <option ng-repeat=\\\"node in $ctrl.expandableNodes track by node.id\\\"\\n                    value=\\\"{{node.id}}\\\">{{node.path}}</option>\\n            </select>\\n        </div>\\n        <div class=\\\"form-group\\\" ng-transclude>\\n        </div>\\n    </form>\\n    <uib-tabset>\\n        <uib-tab heading=\\\"svg\\\">\\n            <div ng-bind-html=\\\"$ctrl.svg\\\"></div>\\n        </uib-tab>\\n        <uib-tab heading=\\\"dot\\\">\\n            <p>This is for debugging purposes</p>\\n            <!-- TODO: a disabled text area -->\\n            <pre>{{$ctrl.dot}}</pre>\\n        </uib-tab>\\n    </uib-tabset>\\n    <div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/viewer/viewer.html\n// module id = 632\n// module chunks = 1","import * as angular from 'angular'\nimport template from './help.html'\nimport helpMarkdown from './help.md'\nimport 'angular-marked'\n\nclass HelpController {\n    constructor(){\n        this.content = helpMarkdown\n    }\n}\n\nexport default angular\n    .module('c4-lab.help', ['hc.marked'])\n    .component('c4LabHelp', {\n        template,\n        controller: HelpController\n    })\n    .name\n\n\n// WEBPACK FOOTER //\n// ./src/help/index.js","module.exports = \"<c4-lab-nav></c4-lab-nav>\\n<div marked=\\\"$ctrl.content\\\"></div>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/help/help.html\n// module id = 634\n// module chunks = 1","module.exports = \"# C4-Lab Help\\n\\nC4-Lab defines a domain specific language (DSL) for creating software\\narchitectures, modeled heavily after [Simon Brown][SB]'s [C4][] approach\\n(Context, Containers, Components, and Classes). See [Visualising Software\\nArchitecture][] for more information.\\n\\n[SB]: http://www.simonbrown.je/\\n[C4]: http://www.codingthearchitecture.com/2014/08/24/c4_model_poster.html\\n[Visualising Software Architecture]: https://leanpub.com/visualising-software-architecture\\n\\n## Features\\n\\nC4-Lab has import, export, and \\\"share\\\" features accessible in the top\\nnavigation, and saves work-in-progress in your browser.  If you want to save a\\ngraph for later editing, export the `sexp` format, or save the \\\"share\\\" link.\\nOther exports do not allow resuming editing.\\n\\n## Syntax\\n\\nThe DSL uses [s-expression][]s to represent the hierarchy and connections\\nbetween actors, systems, containers, and components. If you squint your eyes, it\\nlooks like common lisp or scheme macros.\\n\\nWe use the excellent [CodeMirror][] in-browser editor to add syntax highlighting\\nand some help with managing the parentheses.\\n\\n[CodeMirror]: https://codemirror.net/\\n[s-expression]: https://en.wikipedia.org/wiki/S-expression\\n\\n### Full example\\n\\nHere's a small bit of software archicture for a web application, demonstrating\\nsome of the syntax.\\n\\n    (define-actor (\\\"customer\\\")\\n      (edge :to \\\"dog rater\\\" :description \\\"views/votes/uploads dog pictures\\\"))\\n\\n    (define-system (\\\"dog rater\\\" :desc \\\"fun clickbait website\\\")\\n\\n      (def-container (\\\"frontend\\\" :tech \\\"typescript, reactjs\\\")\\n        (edge :to \\\"./database\\\" :desc \\\"display sweet dog pictures\\\" \\n              :direction \\\"both\\\")\\n        )\\n\\n      (def-container (\\\"backend\\\" :tech \\\"golang\\\")\\n        (def-component (\\\"ad provider\\\")\\n          (edge :to \\\"third party ad network\\\" :desc \\\"fetch user-specific ads\\\")\\n          )\\n        )\\n\\n      (def-container (\\\"database\\\" :tech \\\"amazon S3\\\"))\\n    )\\n\\n    (def-system (\\\"third party ad network\\\" :desc \\\"advert network\\\"))\\n\\n### Actors\\n\\nTop level element, represents a human using the software.\\n\\nExamples:\\n\\n    (define-actor (\\\"customer\\\")\\n      ;; optional edges to other parts of the architecture\\n      )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-actor ((name) &body children))\\n\\n### Systems\\n\\nTop level element, represents a logical software system.\\n\\nExamples:\\n\\n    (define-system (\\\"name of the system\\\" :description \\\"optional description\\\" \\n                                         :tech \\\"optional technology\\\")\\n      ;; optional children of this system; edges or containers\\n      )\\n    (def-system (\\\"name of the system\\\" :desc \\\"can abbreviate a little; :desc vs :description, def-system vs define-system\\\"))\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-system ((name) &key description tech &body children))\\n\\n### Containers\\n\\nContainers are independently deployable pieces of a system. They should be used as children of a `def-system`\\n\\nExamples:\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\" :tech \\\"...\\\" :desc \\\"...\\\")\\n        ;; optional children of this system; edges or components\\n      )\\n    )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-container ((name) &key description tech &body children))\\n\\n### Components\\n\\nComponents are pieces of one deployable part of a system. These could be things\\nlike java packages, C# assemblies, ES6 modules, etc. They should be used as\\nchildren of a `def-container`\\n\\nExamples:\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\")\\n        (def-component (\\\"upload page\\\" :tech \\\"...\\\" :desc \\\"...\\\"))\\n        (def-component (\\\"dog browser\\\")\\n          ;; optional children, edges\\n        )\\n      )\\n    )\\n\\nIf this were a real lisp macro, it's definition would look like:\\n\\n    (defmacro define-component ((name) &key description tech &body children))\\n\\n### Edges\\n\\nEdges represent connections between the different elements in a software\\narchitecture. These have a few different options for how to connect things.\\nConnections are specified using something like a file path to unambiguously\\nidentify the destination of an edge.\\n\\nThey can be used as children of `def-actor`, `def-system`, `def-container`, and\\n`def-component`.\\n\\nYou can customize the direction of the edge using the `:direction` (`:dir` for\\nshort) option. The valid options are:\\n\\n* `push` - (default), indicates this node is reaching out to the target. Draws\\n  an arrow from the current node to the target.\\n* `pull` - indicates this node is pulling from the target, e.g. as a subscriber.\\n  Draws an arrow from the target to the current node.\\n* `both` - indicates bidrectional flow of actions/information. Draws an arrow to\\n  and from the target to the current node.\\n\\nExamples:\\n\\n    (def-actor (\\\"customer\\\")\\n      ;; connect this actor to the dog ratr system, and describe\\n      ;; how the actor uses the system\\n      (edge :to \\\"dog ratr\\\" :desc \\\"clicks a lot of links and ads\\\"))\\n\\n    (def-system (\\\"dog ratr\\\")\\n      (def-container (\\\"frontend\\\")\\n        ;; connect the frontend to the backend, with a relative path\\n        (edge :to \\\"./backend\\\" :desc \\\"fetch list of dogs\\\" :dir \\\"both\\\")\\n        ;; can specify a \\\"full\\\" path to connect with nodes that aren't\\n        ;; on the top level\\n        (edge :to \\\"ad server/click tracker\\\" :desc \\\"records a click via HTTP\\\")\\n      )\\n      (def-container (\\\"backend\\\"))\\n    )\\n\\n    (def-system (\\\"ad server\\\")\\n      (def-container (\\\"click tracker\\\")))\\n\\nIf this were a real lisp function, it's definition would look like:\\n\\n    (defun edge (&key to description (direction \\\"both\\\")))\\n\\n### Comments\\n\\nComments are of questionable use since they don't show up in the diagrams at\\nall, but they are useful for commenting out code while you're still hasing out\\nthe architecture.\\n\\nAny content after two colons is ignored as a comment.\\n\\nExamples:\\n\\n    ;; this whole line is a comment\\n    (def-system (\\\"dog ratr\\\")) ;; this bit is ignored, too\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/help/help.md\n// module id = 635\n// module chunks = 1","import * as angular from 'angular'\nimport { StateService } from 'angular-ui-router'\nimport { INgRedux, INgReduxProvider, Middleware } from 'ng-redux'\nimport 'ng-redux'\nimport { Action, applyMiddleware, Dispatch, Store } from 'redux'\nimport createSagaMiddleware from 'redux-saga'\nimport rootReducer from './reducers'\nimport { rootSaga } from './sagas'\nimport { IState } from './state'\n\nconst timingMiddleware: any = (store: Store<IState>) => (next: Dispatch<IState>) => (action: Action) => {\n    // tslint:disable:no-console\n    const label = `Processing ${action.type}`\n    console.time(label)\n    console.group(label)\n    try {\n        return next(action)\n    } finally {\n        console.timeEnd(label)\n        console.groupEnd()\n    }\n    // tslint:enable:no-console\n}\n\n// tslint:disable-next-line:ban-types\nconst enhancers: Function[] = []\nconst reduxDevtool = (window as any).__REDUX_DEVTOOLS_EXTENSION__\nif (reduxDevtool) { enhancers.push(reduxDevtool()) }\nconst sagas = createSagaMiddleware()\n\nexport default angular.module('c4-lab.store', ['ngRedux'])\n    .config(($ngReduxProvider: INgReduxProvider) => {\n        $ngReduxProvider.createStoreWith(rootReducer, [timingMiddleware, sagas], enhancers)\n    })\n    .run(($ngRedux: INgRedux) => {\n        sagas.run(rootSaga)\n    })\n    .name\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/store/store.module.ts","import { StateService } from 'angular-ui-router'\nimport { combineReducers } from 'redux'\nimport { reducerWithInitialState } from 'typescript-fsa-reducers'\nimport { IGraph, INode, NodeId } from '../../core/interfaces'\nimport {\n    angularInitialized, dotChanged, githubLoginComplete, githubLogout,\n    preview, previewEdit, sourceChanged, sourceParsed, sourceParseError,\n    svgChanged, zoomChanged,\n} from '../actions'\nimport { IState, IUser } from '../state'\nimport sample from './c4lab.sexp'\n\nexport const initialState: IState = {\n    graph: null,\n    isPreview: false,\n    parseError: null,\n    source: sample,\n    zoomNodeId: null,\n    zoomableNodes: [],\n}\n\nconst sourceReducer = reducerWithInitialState(sample)\n    .case(sourceChanged, (old, evt) => evt.source)\n    .build()\n\n// TODO: not need this; there's gotta be some config to teach jest's\n// typescript preprocessor to respect the additional types\nconst testSafeSourceReducer = (src: string, evt: any) =>\n    sourceReducer(src, evt) || ''\n\nconst parseErrorReducer = reducerWithInitialState<string | null>(null)\n    .case(sourceParseError, (old, evt) => evt.error)\n    .case(sourceParsed, (old, evt) => null)\n    .build()\n\nconst graphReducer = reducerWithInitialState<IGraph | null>(null)\n    .case(sourceParsed, (old, evt) => evt.graph)\n    .build()\n\nconst zoomableNodesReducer = reducerWithInitialState<INode[]>([])\n    .case(sourceParsed, (old, evt) => evt.graph.items\n        .filter((x) => x.canExpand)\n        .sort((a, b) => a.path.localeCompare(b.path)))\n    .build()\n\nconst zoomNodeIdReducer = reducerWithInitialState<NodeId | null>(null)\n    .case(zoomChanged, (old, evt) => evt.zoomNodeId || null)\n    .build()\n\nconst dotReducer = reducerWithInitialState<string | null>(null)\n    .case(dotChanged, (old, evt) => evt.dot)\n    .build()\n\nconst svgReducer = reducerWithInitialState<string | null>(null)\n    .case(svgChanged, (old, evt) => evt.svg)\n    .build()\n\nconst stateReducer = reducerWithInitialState<StateService | null>(null)\n    .case(angularInitialized, (old, evt) => evt.$state)\n    .build()\n\nconst windowReducer = reducerWithInitialState<Window | null>(null)\n    .case(angularInitialized, (old, evt) => evt.$window)\n    .build()\n\nconst userReducer = reducerWithInitialState<IUser | null>(null)\n    .case(githubLoginComplete, (old, evt) => evt)\n    .case(githubLogout, (old, evt) => null)\n    .build()\n\nconst isPreviewReducer = reducerWithInitialState<boolean | null>(false)\n    .case(preview, (old, evt) => true)\n    .case(previewEdit, (old, evt) => false)\n    .build()\n\nconst rootReducer = combineReducers<IState>({\n    $state: stateReducer,\n    $window: windowReducer,\n    dot: dotReducer,\n    graph: graphReducer,\n    isPreview: isPreviewReducer,\n    parseError: parseErrorReducer,\n    source: testSafeSourceReducer,\n    svg: svgReducer,\n    user: userReducer,\n    zoomNodeId: zoomNodeIdReducer,\n    zoomableNodes: zoomableNodesReducer,\n})\n\nexport default rootReducer\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/store/reducers/index.ts","module.exports = \"(title \\\"c4-lab\\\")\\n;; add an actor to represent humans that use your system\\n(define-actor (\\\"Devs\\\")\\n  ;; add edges to say what part of your system the actor uses\\n  (edge\\n   ;; specify where the other end of this edge is using something like a path\\n   ;; \\\"C4 Lab/UI\\\" points at the \\\"C4 Lab\\\" system, the the \\\"UI\\\" container inside\\n   :to \\\"C4 Lab/UI\\\"\\n   :description \\\"Create/read/update designs\\\")\\n  )\\n;; add your system\\n(define-system (\\\"C4 Lab\\\"\\n                :description \\\"Web-based rapid prototyping of C4 diagrams to augment whiteboards\\\")\\n  ;; add the containers inside your system\\n  (def-container (\\\"UI\\\" :tech \\\"html5, angularjs\\\"\\n                       :description \\\"prototype, import, export C4 diagrams\\\" ))\\n  )\\n(define-system (\\\"Github\\\" :description \\\"Free git and web hosting\\\")\\n  ;; add edges between any actor, system, or container\\n  (edge :description \\\"hosts\\\" :to \\\"C4 Lab/UI\\\")\\n  (edge :to \\\"Travis-ci\\\" :description \\\"triggers build\\\")\\n  )\\n(define-system (\\\"Travis-ci\\\" :description \\\"Open source CI\\\")\\n  (edge :to \\\"Github\\\" :description \\\"publishes\\\"))\\n;; any line that starts with \\\";;\\\" is a comment\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/store/reducers/c4lab.sexp\n// module id = 717\n// module chunks = 1","\nimport { StateService } from '@uirouter/core'\nimport { SagaIterator } from 'redux-saga'\nimport { all, call, put, select, take, takeLatest, throttle } from 'redux-saga/effects'\nimport { Action } from 'typescript-fsa'\nimport { DataStore, parse, toDot, toSvg } from '../core'\nimport { NodeId } from '../core/interfaces'\nimport {\n    angularInitialized, dotChanged, ISourceChanged, IZoomChanged,\n    sourceChanged, sourceParsed, sourceParseError, svgChanged, zoomChanged,\n} from './actions'\nimport exportSaga from './sagas/export'\nimport githubSaga from './sagas/github'\nimport previewSaga from './sagas/preview'\n\nfunction* onSourceChanged(action: Action<ISourceChanged>): SagaIterator {\n    try {\n        const graph = parse(action.payload.source)\n        yield put(sourceParsed({ graph }))\n    } catch (error) {\n        yield put(sourceParseError({ error: error.message }))\n    }\n}\n\nfunction hrefTo($state: StateService, zoom: NodeId) {\n    const name = $state.current.name\n    if (name === undefined) { return '' }\n    const params = Object.assign({}, $state.params, { zoom })\n    return $state.href(name, params)\n}\n\nfunction* render(): SagaIterator {\n    // TODO: make this type safe, need to mess with NodeId being nullable\n    const { zoomNodeId, graph, $state, $window, source, isPreview } = yield select()\n\n    // TODO: resolve race where we call this from routes.js\n    if (!graph) { return }\n\n    if (!isPreview) {\n        new DataStore($window.localStorage).save(source)\n    }\n\n    // TODO: resolve race condition where we call this method before $state.current exists\n    // so we can drop this wait\n    while (!($state.current && $state.current.name)) {\n        yield call(wait)\n    }\n    const dot = toDot(graph, zoomNodeId, (x) => hrefTo($state, x))\n    yield put(dotChanged({ dot }))\n    const svg = toSvg(dot)\n    yield put(svgChanged({ svg }))\n}\n\nfunction wait(ms = 50) {\n    return new Promise((resolve) => setTimeout(resolve, ms))\n}\n\nfunction* updateZoom(action: Action<IZoomChanged>): SagaIterator {\n    const { $state } = yield select()\n    const { zoomNodeId: zoom } = action.payload\n    if (zoom === $state.params.zoom) { return }\n    yield call(render)\n    const name = $state.current.name\n    if (name) {\n        const params = Object.assign({}, $state.params, { zoom })\n        $state.go(name, params, { notify: false })\n    }\n}\n\nfunction* latestSource(): SagaIterator { yield takeLatest(sourceChanged, onSourceChanged) }\nfunction* latestGraph(): SagaIterator { yield takeLatest(sourceParsed, render) }\nfunction* latestZoom(): SagaIterator { yield throttle(100, zoomChanged, updateZoom) }\n\nfunction* init(): SagaIterator {\n    yield take(angularInitialized.type)\n    if (!window.localStorage) { return } // TODO: hack to make tests happy\n\n    // skip restoring from local storage if we're on a preview page\n    if ((/load/i).test(window.location.hash)) {\n        return\n    }\n    const storage = new DataStore(window.localStorage)\n    const source = storage.load()\n    if (source) { yield put(sourceChanged({ source })) }\n}\n\nexport function* rootSaga(): SagaIterator {\n    yield all([\n        call(latestSource),\n        call(latestGraph),\n        call(latestZoom),\n        call(init),\n        call(githubSaga),\n        call(previewSaga),\n        call(exportSaga),\n    ])\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/store/sagas.ts","import { SagaIterator } from 'redux-saga'\nimport { put, select, takeLatest } from 'redux-saga/effects'\nimport { Action } from 'typescript-fsa'\nimport { Exporter, uriEncode } from '../../core'\nimport { exported, gistExport, IExportRequest } from '../actions'\n\nfunction* onExport(action: Action<IExportRequest>): SagaIterator {\n    const { $state, source, graph: { title }, zoomNodeId, dot } = yield select()\n    const { payload: { format } } = action\n\n    if (format === 'gist') {\n        const href = $state.href('load',\n            {\n                data: uriEncode(source),\n                zoom: zoomNodeId,\n            })\n        yield put(gistExport.started({ href }))\n    } else {\n        const exporter = new Exporter(window.document)\n        exporter.export(format, title, source, dot)\n    }\n}\n\nexport default function* exportSaga(): SagaIterator {\n    yield takeLatest(exported, onExport)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/store/sagas/export.ts","import * as Octokit from '@octokit/rest'\nimport { SagaIterator } from 'redux-saga'\nimport { all, call, put, select, takeLatest } from 'redux-saga/effects'\nimport { Action } from 'typescript-fsa'\nimport { GistExporter } from '../../core/exporter/gist'\nimport { gistExport, githubLoggedIn, githubLoginComplete, IGistExportRequest, IGithubLoggedIn } from '../actions'\n\n/* OMG something is wrong with my typescript + webpack */\nfunction createOctokit(): Octokit {\n    try { return new Octokit() } catch (e) { /* next */ }\n    try {\n        const untyped = (Octokit as unknown)\n        const factory = untyped as { default: () => Octokit }\n        return factory.default()\n    } catch (e) { /* next */ }\n    throw new Error('I dunno, man')\n}\n\nconst octokit = createOctokit()\n\nfunction* onGithubLogin(action: Action<IGithubLoggedIn>): SagaIterator {\n    octokit.authenticate({\n        token: action.payload.token,\n        type: 'oauth',\n    })\n    const user = yield call(() => octokit.users.get({}))\n    yield put(githubLoginComplete({\n        ...action.payload,\n        avatarUrl: user.data.avatar_url,\n        login: user.data.login,\n    }))\n}\n\nfunction* exportToGist(action: Action<IGistExportRequest>): SagaIterator {\n    const { origin, pathname } = window.location\n    const url = new URL(`${origin}${pathname}${action.payload.href}`)\n    const exporter = new GistExporter(octokit)\n    const { source, graph: { title } } = yield select()\n    const result = yield call(() => exporter.export(title, source, url))\n    yield put(gistExport.done(result))\n    // TODO: move this side-effect elsewhere\n    window.open(result.url, '_blank')\n}\n\nfunction* handleLogin(): SagaIterator {\n    yield takeLatest(githubLoggedIn, onGithubLogin)\n}\nfunction* handleExport(): SagaIterator {\n    yield takeLatest(gistExport.started, exportToGist)\n}\n\nexport default function* githubSaga(): SagaIterator {\n    yield all([\n        call(handleLogin),\n        call(handleExport),\n    ])\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/store/sagas/github.ts","import * as Octokit from '@octokit/rest'\n\ninterface IGistResult {\n    id: string\n    url: URL\n}\n\nfunction createReadme(title: string, url: URL) {\n    return `# C4 Diagrams for *${title}*\n\nThese files were exported from [C4-Lab](https://ryepup.github.io/c4-lab)\n\n[View or edit these diagrams](${url})\n`\n}\n\nexport class GistExporter {\n\n    constructor(private gh: Octokit) { }\n\n    public export(title: string, sexp: string, url: URL): Promise<IGistResult> {\n        // TODO: use async/await\n        return this.gh.gists.create({\n            description: `C4 diagrams for '${title}'`,\n            // octokit types are just wrong\n            files: this.createFiles(title, url, sexp) as Octokit.GistsCreateParamsFiles,\n            public: false,\n        })\n            .then((resp) => {\n                return {\n                    id: resp.data.id,\n                    url: new URL(resp.data.html_url),\n                }\n            })\n    }\n\n    private createFiles(title: string, url: URL, sexp: string) {\n        return {\n            'README.md': {\n                content: createReadme(title, url),\n            },\n            [`${title}.sexp`]: {\n                content: sexp,\n            },\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/core/exporter/gist.ts","import { SagaIterator } from 'redux-saga'\nimport { all, call, put, select, takeLatest } from 'redux-saga/effects'\nimport { Action } from 'typescript-fsa'\nimport { DataStore, uriDecode } from '../../core/'\nimport { IPreview, preview, previewEdit, sourceChanged } from '../actions'\n\nfunction* onPreviewEdit(action: Action<undefined>): SagaIterator {\n    const { source, $state } = yield select()\n    new DataStore(window.localStorage).save(source)\n    yield put(sourceChanged({ source }))\n    $state.go('home')\n}\n\nfunction* onPreview(action: Action<IPreview>): SagaIterator {\n    const source = uriDecode(action.payload.encodedSource)\n    yield put(sourceChanged({ source }))\n}\n\nfunction* latestPreview(): SagaIterator { yield takeLatest(preview, onPreview) }\nfunction* latestPreviewEdit(): SagaIterator { yield takeLatest(previewEdit, onPreviewEdit) }\n\nexport default function* previewSaga(): SagaIterator {\n    yield all([\n        call(latestPreview),\n        call(latestPreviewEdit),\n    ])\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/source-map-loader!./node_modules/tslint-loader!./src/store/sagas/preview.ts"],"sourceRoot":""}